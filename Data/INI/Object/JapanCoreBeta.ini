;------------------------------------------------------------------------------
ObjectCreationList OCL_Shipyard
 CreateObject
   ObjectNames = ChinaShipyard
   Disposition = LIKE_EXISTING
 End
End
;------------------------------------------------------------------------------
ObjectCreationList OCL_ShipyardCore
 CreateObject
   ObjectNames = ChinaShipyardTransitionObject
   Disposition = LIKE_EXISTING
 End
End

;this could do the trick of water-only "deploy". FAKE RIDER!!
;------------------------------------------------------------------------------
Object WaterOnlyRider

  ; ***DESIGN parameters ***
  EditorSorting       = SYSTEM
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  
  WeaponSet
    Weapon = PRIMARY None
  End
  
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = DamageFX_Empty
  End

  CommandSet = ChinaShipyardCoreCommandSet

  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR
  KindOf = PRELOAD INFANTRY CLICK_THROUGH IGNORED_IN_GUI NO_HEAL_ICON UNATTACKABLE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1.0
    InitialHealth   = 1.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End

  Locomotor = SET_NORMAL BasicBoatLocomotor  ;Water-only locomotor!

  Behavior = OCLUpdate ModuleTag_Remove01
    MinDelay     = 1000
    MaxDelay     = 1000
    OCL          = OCL_DeleteMeOutside
  End

  Behavior = DestroyDie ModuleTag_Remove02
    DeathTypes = ALL
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight = 1.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 1;
  ShadowSizeY = 1;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
;The actual object
Object ChinaShipyard

  ; *** ART Parameters ***
  SelectPortrait         = SNWarFact_L
  ButtonImage            = SNWarFact

  ; ------------ the main factory itself -----------------
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = NIGHT

    ; day
    DefaultConditionState
      Model           = NBSHIPYARD1
    End
    ConditionState    = DAMAGED
      Model           = NBSHIPYARD1_D
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBSHIPYARD1_E
    End
    
    ConditionState    = SNOW
      Model           = NBSHIPYARD1_S  
    End
    ConditionState = DAMAGED SNOW
      Model           = NBSHIPYARD1_SD
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model           = NBSHIPYARD1_SE
    End
    
    
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBSHIPYARD1
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBSHIPYARD1_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBSHIPYARD1_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBSHIPYARD1_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBSHIPYARD1_SD
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBSHIPYARD1_SE
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    ;**************************************************************************************************************************


  End
  
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                 = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = NIGHT
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = SNOW
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = SNOW NIGHT
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_DAY
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState     = NIGHT PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_NIGHT
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState     = SNOW PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_SNOW
      ParticleSysBone  = Dust01 BuildingSnowDust
      ParticleSysBone  = Smoke01 BuildUpSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpSnowSmoke
    End
    ConditionState     = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_SNOWNIGHT
      ParticleSysBone  = Dust01 BuildingNightSnowDust
      ParticleSysBone  = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState    = DOWN_DEFAULT UP_DAY
     Model             = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_NIGHT
     Model             = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_SNOW
     Model             = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_SNOWNIGHT
     Model             = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = UP_DAY DOWN_DEFAULT
      Model            = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_NIGHT DOWN_DEFAULT
      Model            = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_SNOW DOWN_DEFAULT
      Model            = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:WarFactory
  Side             = Civilian
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = ChinaSupplyCenter
  End
  BuildCost        = 2000
  BuildTime        = 15.0           ; in seconds
  EnergyProduction = -1
  CommandSet       = ChinaShipyardCommandSet
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE IMMOBILE SELECTABLE MP_COUNT_FOR_VICTORY REPAIR_PAD SCORE_DESTROY CAPTURABLE FS_FACTORY AUTO_RALLYPOINT FS_WARFACTORY 
  Body            = StructureBody ModuleTag_08
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_LMAO
  End
  Locomotor = SET_NORMAL ShipyardBuildingLocomotor

  Behavior = DestroyDie ModuleTag_09
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_10
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_11
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_12
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_13
    UnitCreatePoint   = X: -25.0  Y:-39.0   Z:20.0
    NaturalRallyPoint = X: 60.0  Y:-39.0  Z:20.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RepairDockUpdate ModuleTag_14
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_23
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 57.0
  GeometryMinorRadius = 61.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
  ;Scale = 0.8

End

;The "Dock Core"
;---------------------------------------------------------------------------------------
Object ChinaShipyardCore

  ; *** ART Parameters ***
  SelectPortrait         = SNPowTruck_L
  ButtonImage            = SNPowTruck

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes 

    DefaultConditionState
      Model              = NVPOWTRCK
    End
    ConditionState       = MOVING
      Model              = NVPOWTRCK
      ParticleSysBone    = TreadFX01 QuadCannonDust
      ParticleSysBone    = TreadFX02 QuadCannonDust
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NVPOWTRCK_D
    End
    ConditionState       = MOVING REALLYDAMAGED RUBBLE
      Model              = NVPOWTRCK_D
      ParticleSysBone    = TreadFX01 QuadCannonDust
      ParticleSysBone    = TreadFX02 QuadCannonDust
    End

    ConditionState       = OVER_WATER
      Model              = NVPOWTRCK
      ParticleSysBone    = None AmphibWaveRest
      TransitionKey = TRANS_Hover
    End
    ConditionState       = OVER_WATER MOVING
      Model              = NVPOWTRCK
      ParticleSysBone    = TreadFX01 AmphibWave ;QuadCannonDust
      ParticleSysBone    = TreadFX02 AmphibWave ;QuadCannonDust
      ParticleSysBone    = Mist01 AmphibMist
      ParticleSysBone    = Mist02 AmphibMist
      ParticleSysBone    = Mist03 AmphibMistSide
      ParticleSysBone    = Mist04 AmphibMistSide
      TransitionKey = TRANS_Hover
    End
    ConditionState       = OVER_WATER REALLYDAMAGED RUBBLE
      Model              = NVPOWTRCK_D
      ParticleSysBone    = None AmphibWaveRest
      ParticleSysBone    = Smoke01 SmolderingSmoke
      TransitionKey = TRANS_HoverDamaged
    End
    ConditionState       = OVER_WATER MOVING REALLYDAMAGED RUBBLE
      Model              = NVPOWTRCK_D
      ParticleSysBone    = TreadFX01 AmphibWave ;QuadCannonDust
      ParticleSysBone    = TreadFX02 AmphibWave ;QuadCannonDust
      ParticleSysBone    = Mist01 AmphibMist
      ParticleSysBone    = Mist02 AmphibMist
      ParticleSysBone    = Mist03 AmphibMistSide
      ParticleSysBone    = Mist04 AmphibMistSide
      ParticleSysBone    = Smoke01 SmolderingSmoke
      TransitionKey = TRANS_HoverDamaged
    End

    ConditionState      = REALLYDAMAGED RUBBLE TOPPLED ;suicide, no smoke
      Model             = NVPOWTRCK
    End
    AliasConditionState = REALLYDAMAGED RUBBLE TOPPLED OVER_WATER

    TrackMarks           = EXTnkTrack.tga
    ;Dust                 = RocketBuggyDust
    ;DirtSpray            = RocketBuggyDirtSpray
    ;PowerslideSpray      = RocketBuggyDirtPowerSlide
    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone          = Tire01
    RightFrontTireBone         = Tire02
    MidLeftRearTireBone        = Tire03
    MidRightRearTireBone       = Tire05
    LeftRearTireBone           = Tire04
    RightRearTireBone          = Tire06
    TireRotationMultiplier     = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_fence
    AnimationsRequirePower = No
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE DYING OVER_WATER

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT
    AliasConditionState = RELOADING_C NIGHT
    AliasConditionState = BETWEEN_FIRING_SHOTS_C SNOW
    AliasConditionState = RELOADING_C SNOW
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT SNOW
    AliasConditionState = RELOADING_C NIGHT SNOW

    ConditionState    = TOPPLED
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = TOPPLED NIGHT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = TOPPLED SNOW
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = TOPPLED SNOW NIGHT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_scaff

    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE DYING OVER_WATER

    DefaultConditionState
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT
    AliasConditionState = RELOADING_C NIGHT
    AliasConditionState = BETWEEN_FIRING_SHOTS_C SNOW
    AliasConditionState = RELOADING_C SNOW
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT SNOW
    AliasConditionState = RELOADING_C NIGHT SNOW

    ConditionState   = TOPPLED
      Model            = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_DAY
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState   = TOPPLED NIGHT
      Model            = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_NIGHT
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState   = TOPPLED SNOW
      Model            = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOW
      ParticleSysBone  = Dust01 BuildingSnowDust
      ParticleSysBone  = Smoke01 BuildUpSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpSnowSmoke
    End
    ConditionState   = TOPPLED SNOW NIGHT
      Model            = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone  = Dust01 BuildingNightSnowDust
      ParticleSysBone  = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpNightSnowSmoke
    End
  End

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:Dozer ;MCV
  Side = Civilian
  EditorSorting = VEHICLE
  TransportSlotCount = 5
  BuildCost       = 2000
  BuildTime       = 15.0 ;in seconds
  VisionRange         = 170
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None 
    Weapon  = PRIMARY  None
    Weapon  = TERTIARY KillMCVWeapon
    AutoChooseSources = TERTIARY None
  End

  ArmorSet
    Conditions = None
    Armor      = MCVArmor
    DamageFX   = TruckDamageFX
  End

  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ExperienceValue     = 90 100 130 150 ;Experience point value at each level
  ExperienceRequired  = 0  40  80  160 ;Experience points needed to gain each level
  IsTrainable         = No            ;Can gain experience

  CommandSet = ChinaShipyardCoreCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = POWTruckChinaVoiceSelect
  VoiceMove             = POWTruckChinaVoiceMove
  VoiceAttack           = POWTruckChinaVoiceCrush
  VoiceGuard            = POWTruckChinaVoiceMove
  SoundMoveStart        = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart
  SoundEnter            = NoSound ;HumveeEnter
  SoundExit             = NoSound ;HumveeExit

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    ;TurretMoveStart      = NoSound
    VoiceCreate          = POWTruckChinaVoiceCreate
    VoiceCrush           = POWTruckChinaVoiceCrush
    VoiceEnter           = POWTruckChinaVoiceMove
    ; Required for the W3DTruckDraw module
    TruckLandingSound    = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RadarVanMoveStart
    VoicePickup          = POWTruckChinaVoicePickup
  End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SCORE_CREATE

  Body = ActiveBody ModuleTag_02
    MaxHealth     = 5000.0 ;must be same as conyard building else when badly damage building transforms, MCV starts off dead
    InitialHealth = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End
  Locomotor = SET_NORMAL HoverTankLandLocomotor HoverTankWaterLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 75.0
  End

  Behavior = RiderChangeContain ModuleTag_WaterOnlyShit
    Rider1        = WaterOnlyRider RIDER1 WEAPON_RIDER1 STATUS_RIDER1 ChinaShipyardCoreCommandSet SET_NORMAL
    ScuttleDelay  = 5000
    ScuttleStatus = TOPPLED

    ;Standard TransportContain stuff
    Slots                 = 1
    InitialPayload        = WaterOnlyRider 1
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    DoorOpenTime = 0
  End

  Behavior        = CreateObjectDie ModuleTag_Transform01
    ExemptStatus  = STATUS_RIDER1 
    CreationList  = OCL_ShipyardCore ;OCL_Shipyard     ;***crate "deploying" object
    DeathTypes    = NONE +EXTRA_2 +TOPPLED
    TransferPreviousHealth = Yes ;so MCV is also damaged if con yard was damaged
  End
  Behavior = SlowDeathBehavior ModuleTag_Transform02
    ExemptStatus  = STATUS_RIDER1 
    DeathTypes = NONE +EXTRA_2 +TOPPLED
    DestructionDelay = 0 ;5000 ;3000
  End

  Behavior = SlowDeathBehavior ModuleTag_Death
    RequiredStatus  = STATUS_RIDER1 
    DeathTypes = ALL -EXTRA_2 -TOPPLED
    SinkDelay        = 3500
    SinkRate         = 2     ; in Dist/Sec
    DestructionDelay = 8000
    DestructionDelayVariance = 500
    OCL = INITIAL OCL_DeadRangerDebris          ;OCL_TechnicalAirDeathStart
    FX = INITIAL FX_TechnicalAirDeathGroundPart
    OCL = MIDPOINT OCL_ChinaPOWTruckDeathEffect    ;OCL_RocketBuggyAirDeath
    FX = MIDPOINT FX_BattleMasterExplosionOneFinal ;FX_RocketBuggyAirDeathAirPart
  End

  Behavior = TransitionDamageFX ModuleTag_TDFX
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 17.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 15.0     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  BuildCompletion = APPEARS_AT_RALLY_POINT

End



;Transition object. Used to "prolonged" deploying/build time. It plays constructing animation
;------------------------------------------------------------------------------
Object ChinaShipyardTransitionObject

  ; *** ART Parameters ***
  SelectPortrait         = SNWarFact_L
  ButtonImage            = SNWarFact

  ; ------------ the main factory itself -----------------
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = NIGHT

    ; day
    DefaultConditionState
      Model           = NBSHIPYARD1        ;*** it should be the model that have constructing animation
      ;Animation       = NBSHIPYARD1.NBSHIPYARD1    ;*** and enable the corresponding animation
      ;AnimationMode   = ONCE
    End
    ConditionState    = DAMAGED
      Model           = NBSHIPYARD1_D
      ;Animation       = NBSHIPYARD1.NBSHIPYARD1
      ;AnimationMode   = ONCE
    End
    ConditionState    = REALLYDAMAGED
      Model           = NBSHIPYARD1_E
      ;Animation       = NBSHIPYARD1.NBSHIPYARD1
      ;AnimationMode   = ONCE
    End
    ConditionState    = RUBBLE
      Model           = None
    End
    
    ConditionState    = SNOW
      Model           = NBSHIPYARD1_S  
      ;Animation       = NBSHIPYARD1.NBSHIPYARD1
      ;AnimationMode   = ONCE
    End
    ConditionState = DAMAGED SNOW
      Model           = NBSHIPYARD1_SD
      ;Animation       = NBSHIPYARD1.NBSHIPYARD1
      ;AnimationMode   = ONCE
    End
    ConditionState = REALLYDAMAGED SNOW
      Model           = NBSHIPYARD1_SE
      ;Animation       = NBSHIPYARD1.NBSHIPYARD1
      ;AnimationMode   = ONCE
    End
    ConditionState    = RUBBLE SNOW
      Model           = None
    End
    
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_fence
    AnimationsRequirePower = No
    IgnoreConditionStates = DAMAGED REALLYDAMAGED OVER_WATER ;RUBBLE DYING 

    DefaultConditionState
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = NIGHT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW NIGHT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End

    ConditionState    = RUBBLE
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = RUBBLE NIGHT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = RUBBLE SNOW
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = RUBBLE SNOW NIGHT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_scaff

    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    IgnoreConditionStates = DAMAGED REALLYDAMAGED OVER_WATER ;RUBBLE DYING 

    DefaultConditionState
      Model           = NBWarFact_A6
      Animation       = NBWarFact_A6.NBWarFact_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT
      Model           = NBWarFact_A6N
      Animation       = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW
      Model           = NBWarFact_A6S
      Animation       = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone  = Dust01 BuildingSnowDust
      ParticleSysBone  = Smoke01 BuildUpSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT
      Model           = NBWarFact_A6SN
      Animation       = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_LAST
      TransitionKey   = DOWN_DEFAULT
      ParticleSysBone  = Dust01 BuildingNightSnowDust
      ParticleSysBone  = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpNightSnowSmoke
    End

    ConditionState    = RUBBLE
      Model           = NBWarFact_A6
      Animation       = NBWarFact_A6.NBWarFact_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = RUBBLE NIGHT
      Model           = NBWarFact_A6N
      Animation       = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = RUBBLE SNOW
      Model           = NBWarFact_A6S
      Animation       = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = RUBBLE SNOW NIGHT
      Model           = NBWarFact_A6SN
      Animation       = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:WarFactory
  Side             = Civilian
  EditorSorting    = STRUCTURE
  ;Prerequisites
  ;  Object = ChinaSupplyCenter
  ;End
  BuildCost        = 2000  ;cash bounty wise
  BuildTime        = 15.0           ; in seconds
  EnergyProduction = 0
  ;CommandSet       = ChinaShipyardCommandSet
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD SELECTABLE FS_FACTORY AUTO_RALLYPOINT STRUCTURE IMMOBILE MP_COUNT_FOR_VICTORY 
  Body            = StructureBody ModuleTag_08
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_LMAO
  End
  Locomotor = SET_NORMAL ShipyardBuildingLocomotor

  Behavior        = CreateObjectDie ModuleTag_Transform01
    CreationList  = OCL_Shipyard
    DeathTypes    = ALL
    TransferPreviousHealth = Yes ;so MCV is also damaged if con yard was damaged
  End
  Behavior = SlowDeathBehavior ModuleTag_Transform02
    DeathTypes = ALL
    DestructionDelay = 5000
  End
  Behavior = LifetimeUpdate ModuleTag_TransformBuildTime
    MinLifetime = 10000    ;ten seconds of deploying time
    MaxLifetime = 10000
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_23
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 57.0
  GeometryMinorRadius = 61.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End




























;Fail Boat. Sorry, I mean Flame Boat :P
;------------------------------------------------------------------------------
Object ChinaFlameBoat ;ChinaFailBoat :P

  SelectPortrait = SUBarricade_L
  ButtonImage    = SUBarricade

  UpgradeCameo1 = Upgrade_ChinaBlackNapalm
  UpgradeCameo2 = Upgrade_ChinaSubliminalMessaging

  ; *** ART Parameters ***

  Draw = W3DModelDraw ModuleTag_01
    ;ExtraPublicBone = Smoke02
    DefaultConditionState
    ;ConditionState = NONE
      Model = CVTUGBOAT
    End

    ConditionState = MOVING OVER_WATER
      Model = CVTUGBOAT
      ParticleSysBone = TreadFX01 AmphibWave
    End

    ConditionState = DAMAGED
      Model         = CVTUGBOAT_D
      ParticleSysBone = TreadFX02  AmphibWaveRest
      ParticleSysBone = Smoke02 FireSmallContinuous
      ParticleSysBone = Smoke04 BeaconSmoke000000 ; SootySmokeTrail
    End

    ConditionState  = DAMAGED MOVING OVER_WATER
      Model         = CVTUGBOAT_D
      ParticleSysBone = TreadFX01 AmphibWave
      ParticleSysBone = Smoke02 FireSmallContinuous
      ParticleSysBone = Smoke04 BeaconSmoke000000
    End

    ConditionState = REALLYDAMAGED
      Model         = CVTUGBOAT_D1
      ParticleSysBone = TreadFX02  AmphibWaveRest ;BattleShipWaterRipples
      ParticleSysBone = Smoke02 JetFireLarge
      ParticleSysBone = Smoke04 BeaconSmoke000000 ;SootySmokeColumn ;SootySmokeTrail
    End

    ConditionState = REALLYDAMAGED MOVING OVER_WATER
      Model         = CVTUGBOAT_D1
      ParticleSysBone = TreadFX01 AmphibWave
      ParticleSysBone = Smoke02 JetFireLarge
      ParticleSysBone = Smoke04 BeaconSmokeFFFFFF ;SootySmokeColumn
    End

    ConditionState = RUBBLE
      Model         = CVTUGBOAT_D1
      ParticleSysBone = TreadFX01 airCarrierShockWave
      ;ParticleSysBone = TreadFX01 airCarrierOilSlick ;airCarrierDeathRipple
      ParticleSysBone = Smoke02 JetFireLarge
      ParticleSysBone = Smoke04 BeaconSmoke000000 ;SootySmokeColumn02
      ParticleSysBone = Smoke03 airCarrierFinalDeathSplash
      ParticleSysBone = Smoke03 AmphibWaveRest
      ParticleSysBone = Smoke03 SootySmokeColumn
    End
    AliasConditionState = RUBBLE OVER_WATER
    AliasConditionState = RUBBLE MOVING OVER_WATER
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = REALLYDAMAGED RUBBLE MOVING OVER_WATER
  End

  Draw = W3DModelDraw ModuleTag_Gunner
    OkToChangeModelColor = Yes
    ;AttachToBoneInAnotherModule = Smoke02
    ParticlesAttachedToAnimatedBones = Yes

    ExtraPublicBone = WEAPONA01
    ExtraPublicBone = TURRETEL
    ExtraPublicBone = TURRET

    DefaultConditionState
      Model = NVDragon
      HideSubObject = CHASSIS TREADSL01 TREADSR01
      ShowSubObject = TURRET HOUSECOLOR01
      Turret = Turret
      TurretPitch = TURRETEL
      HideSubObject = CHASSIS TREADSL01 TREADSR01
      ShowSubObject = TURRET HOUSECOLOR01
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone  = WeaponA01 MolotovBurningRag
    End

    ConditionState = REALLYDAMAGED
      Model = NVDragon_D
      HideSubObject = CHASSIS TREADSL01 TREADSR01
      ShowSubObject = TURRET HOUSECOLOR01
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone  = WeaponA01 FireFactionSmall
    End

    ConditionState = RUBBLE
      Model = NVDragon_D
      HideSubObject = CHASSIS TREADSL01 TREADSR01 TURRET
      ShowSubObject = HOUSECOLOR01
      ParticleSysBone  = TURRETEL NapalmFire
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Tugboat
  Side             = Civilian
  EditorSorting   = VEHICLE
 
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = NONE
    Weapon = PRIMARY DragonTankFlameWeapon
    Weapon = SECONDARY DragonTankFireWallWeapon
    PreferredAgainst = PRIMARY VEHICLE INFANTRY
    PreferredAgainst = SECONDARY STRUCTURE
    AutoChooseSources = PRIMARY FROM_AI FROM_SCRIPT FROM_PLAYER
    AutoChooseSources = SECONDARY FROM_AI FROM_SCRIPT FROM_PLAYER
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY DragonTankFlameWeaponUpgraded
    Weapon = SECONDARY DragonTankFireWallWeaponUpgraded
    PreferredAgainst = PRIMARY VEHICLE INFANTRY
    PreferredAgainst = SECONDARY STRUCTURE
    AutoChooseSources = PRIMARY FROM_AI FROM_SCRIPT FROM_PLAYER
    AutoChooseSources = SECONDARY FROM_AI FROM_SCRIPT FROM_PLAYER
  End
 
  ArmorSet
    Armor           = DragonTankArmor
    DamageFX        = TankDamageFX
  End

  BuildCost = 1200
  BuildTime = 10.0          ;in seconds

  VisionRange         = 150
  ShroudClearingRange = 350
  IsTrainable        = Yes
  ExperienceRequired = 0 100 200 400
  ExperienceValue    = 40 60 80 110

  CommandSet      = ChinaTankDragonCommandSet

  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = DragonTankVoiceSelect
  VoiceMove = DragonTankVoiceMove
  VoiceGuard = DragonTankVoiceMove
  VoiceAttack = DragonTankVoiceAttack
  SoundMoveStart = AmphibiousTransportMoveLoop
  SoundMoveStartDamaged = AmphibiousTransportMoveLoop
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit

  UnitSpecificSounds
    VoiceCreate     = DragonTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    TruckPowerslideSound = AmphibiousTransportMoveLoop
    VoiceCrush      = DragonTankVoiceCrush
    VoiceUnload     = TechnicalVoiceUnload
    VoiceEnter      = DragonTankVoiceMove
    VoiceFlameLocation = DragonTankVoiceFireStorm
  End


  ; *** ENGINEERING Parameters ***  
  KindOf          = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE BOAT SCORE
  RadarPriority   = UNIT

  Body            = ActiveBody ModuleTag_02
    MaxHealth       = 500 ;1000.0
    InitialHealth   = 500 ;1000.0
  End

  Behavior = AIUpdateInterface ModuleTag_09
    Turret
      TurretTurnRate = 180
      TurretPitchRate = 180
      AllowsPitch = Yes
      MinPhysicalPitch   = -50
      NaturalTurretPitch = 0
      NaturalTurretAngle = 0
      MinIdleScanAngle = 30      ; in degrees off the natural turret angle
      MaxIdleScanAngle = 60      ; in degrees off the natural turret angle
      MinIdleScanInterval = 5000 ; in milliseconds
      MaxIdleScanInterval = 10000 ; in milliseconds
      FiresWhileTurning   = Yes

      TurretFireAngleSweep = PRIMARY 10
      TurretFireAngleSweep = SECONDARY 40 ;60
      TurretSweepSpeedModifier = PRIMARY 0.5    ; Sweep slower than you turn (aim for 30 for art)
      TurretSweepSpeedModifier = SECONDARY 2.0  ; Sweep faster than you turn

      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
  End
  Locomotor = SET_NORMAL HoverTankWaterLocomotor
  ;Locomotor = SET_NORMAL_UPGRADED BasicBoatLocomotor
  Locomotor = SET_WANDER HoverTankWaterLocomotor ;BasicBoatLocomotor
  Locomotor = SET_PANIC HoverTankWaterLocomotor ;BasicAmphibiousLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass   = 500.0 ;30.0
  End


  Behavior = SlowDeathBehavior ModuleTag_11
    ;model needs to sink by 27 dist
    DeathTypes = ALL
    SinkDelay = 5000
    SinkRate = 1.5     ; in Dist/Sec
    DestructionDelay = 23000
    FX = INITIAL FX_CarpetBomb
    FX = MIDPOINT FX_TrainWreckSplash
    OCL = MIDPOINT OCL_GenericCarFloatDebris
    FX = FINAL FX_LastBubble
    OCL = FINAL OCL_GenericCarFloatDebris
  End

  Behavior = CreateObjectDie ModuleTag_06
    DeathTypes = ALL
    CreationList = OCL_GenericCarFloatDebris
  End


  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FloatUpdate UpdateTag_01
    Enabled = No ; 'no' because we dont want to be lifted by this update, just swayed around like a buoy
  End

  Behavior = WeaponSetUpgrade ModuleTag_WpnUp
    ;Either of the 2 conditions will cause the upgrade:
    TriggeredBy = Upgrade_ChinaBlackNapalm Upgrade_Veterancy_HEROIC
  End

  Behavior = AutoHealBehavior ModuleTag_Heal
    HealingAmount     = 4
    HealingDelay      = 1000
    TriggeredBy       = Upgrade_ChinaSubliminalMessaging
  End

  Behavior = FireWeaponUpdate ModuleTag_ECM
    Weapon = ECMTankMissileJammer
    ExclusiveWeaponDelay = 250 ;1000 ; If we fire a real weapon, we turn this module off for this long
  End

  Behavior = TransitionDamageFX ModuleTag_DamageSmoke
    DamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SootySmokeTrail
    DamagedFXList1 = Loc: X:0 Y:0 Z:5 FXList:FX_BattleMasterDamageTransition
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:DragonTransitionFire
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:5 FXList:FX_JetBigDamageTransition
    RubbleFXList1 = Loc: X:3.7 Y:0 Z:9.6 FXList:FX_DragonTankDeathExplosionFinal
    RubbleOCL1    = Loc: X:3.7 Y:0 Z:10.1 OCL:OCL_DragonDebris
  End

  Geometry        = BOX
  GeometryIsSmall = Yes
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 14.0
  GeometryHeight  = 10.0
  Shadow          = SHADOW_VOLUME
  BuildCompletion = APPEARS_AT_RALLY_POINT

End


;Thanks to Beng for the inspiration :)
;------------------------------------------------------------------------------
;Rocket Skidoo. Rocket Buggy on water. originally a snowmobile
Object RocketStrider

  ; *** ART Parameters ***
  SelectPortrait         = SURocketBuggy_L
  ButtonImage            = SURocketBuggy

  UpgradeCameo1 = Upgrade_GLABuggyAmmo
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = TREAD

    DefaultConditionState
      Model = UIRGaurd_S
      HideSubObject = MESH02
      ParticleSysBone  = TREAD CombatBikeSmokeLight ;SMOKE is a bone too
      ;WeaponFireFXBone = PRIMARY HANDLES
      ;WeaponLaunchBone = PRIMARY HANDLES
      ;WeaponMuzzleFlash = PRIMARY   MESH02
      ;WeaponMuzzleFlash = SECONDARY MESH02
      ;WeaponFireFXBone = SECONDARY HANDLES
      ;WeaponLaunchBone = SECONDARY HANDLES
      ;WeaponMuzzleFlash = TERTIARY MESH02
      ;WeaponFireFXBone = TERTIARY HANDLES
      ;WeaponLaunchBone = TERTIARY HANDLES
    End

    ConditionState  = OVER_WATER
      Model = UIRGaurd_S
      ParticleSysBone = None AmphibWaveRest
    End

    ConditionState  = MOVING
      Model = UIRGaurd_S
      ParticleSysBone = TREAD CombatBikeDust
    End

    ConditionState  = MOVING OVER_WATER
      Model = UIRGaurd_S
      ParticleSysBone = SKIS AmphibMist
      ParticleSysBone = Tread AmphibWave
      ParticleSysBone = BOX05 InfantryDustTrailsWater
    End

    ConditionState = REALLYDAMAGED
      Model = UIRGaurd_S
      ParticleSysBone = BOX05 SootySmokeTrail
    End

    ConditionState  = REALLYDAMAGED MOVING
      Model = UIRGaurd_S
      ParticleSysBone = TREAD CombatBikeDust
      ParticleSysBone = BOX05 SootySmokeTrail
    End

    ConditionState = REALLYDAMAGED OVER_WATER
      Model = UIRGaurd_S
      ParticleSysBone = BOX05 SootySmokeTrail
      ParticleSysBone = None AmphibWaveRest
    End

    ConditionState = REALLYDAMAGED MOVING OVER_WATER
      Model = UIRGaurd_S
      ParticleSysBone = BOX05 SootySmokeTrail
      ParticleSysBone = SKIS AmphibMist
      ParticleSysBone = Tread AmphibWave
      ParticleSysBone = BOX05 InfantryDustTrailsWater
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model = UIRGaurd_S
      HideSubObject = BEFEWF01 MESH02
      ParticleSysBone = BOX05 SootySmokeTrail
      ParticleSysBone = "SNOWMOBILE BODY" JetFireLarge
      ParticleSysBone = "SNOWMOBILE BODY" SootySmokeColumn02
    End
    AliasConditionState = RUBBLE

    ConditionState = REALLYDAMAGED RUBBLE OVER_WATER
      Model = UIRGaurd_S
      HideSubObject = BEFEWF01 MESH02
      ParticleSysBone = BOX05 SootySmokeTrail
      ParticleSysBone = "SNOWMOBILE BODY" JetFireLarge
      ParticleSysBone = "SNOWMOBILE BODY" SootySmokeColumn02
      ParticleSysBone = None AmphibWaveRest
    End
    AliasConditionState = RUBBLE OVER_WATER

    TrackMarks = EXTireTrack03.tga

    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    RightFrontTireBone          = HANDLES
    LeftFrontTireBone           = SKIS
    LeftRearTireBone            = TREAD
    TireRotationMultiplier      = 0   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_RocketRack
    OkToChangeModelColor = Yes
    AttachToBoneInAnotherModule = TREAD

    DefaultConditionState
      Model = UVRockBug
      Turret = Turret
      HideSubObject = CHASSIS TurretUp01 
      ShowSubObject = HOUSECOLOR01 Turret
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVRockBug_D
      Turret = Turret
      HideSubObject = CHASSIS TurretUp01 
      ShowSubObject = HOUSECOLOR01 Turret
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End    
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = UVRockBug
      Turret = TurretUp01
      HideSubObject = CHASSIS Turret
      ShowSubObject = HOUSECOLOR01 TurretUp01 
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
    
    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVRockBug_D
      Turret = TurretUp01
      HideSubObject = CHASSIS Turret
      ShowSubObject = HOUSECOLOR01 TurretUp01 
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End    
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE RUBBLE

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:RocketBuggy
  Side            = Civilian
  EditorSorting   = VEHICLE
  TransportSlotCount  = 1
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY BuggyRocketWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY BuggyRocketWeaponUpgraded
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End
  BuildCost       = 900
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 280
  ShroudClearingRange = 300
  Prerequisites
    ;Object = GLAArmsDealer
  End

  ExperienceValue       = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired    = 0 200 400 800  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  CrusherLevel           = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet            = GLAVehicleRocketBuggyCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove


  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***  
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER BOAT

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 240
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 90
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL SnowmobileWaterLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 30.0
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_CBHU
  End

  Behavior = DestroyDie ModuleTag_05
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End

  Behavior = SlowDeathBehavior ModuleTag_09
    DeathTypes = ALL -CRUSHED -SPLATTED
    FX  = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    FX  = MIDPOINT FX_GenericCarExplode
    OCL = MIDPOINT OCL_GenericCarFloatDebris
    SinkDelay = 5000 ;14000
    SinkRate = 2     ; in Dist/Sec
    DestructionDelay = 12000
  End

  Behavior = FloatUpdate ModuleTag_Float
    Enabled = No ; 'no' because we dont want to be lifted by this update, just swayed around like a buoy
  End

  Behavior = WeaponSetUpgrade ModuleTag_11
    TriggeredBy = Upgrade_GLABuggyAmmo
  End

  Behavior = AutoHealBehavior ModuleTag_13
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 7.5
  GeometryIsSmall = Yes

  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

