; Part of FactionBuilding.ini /////////////////////////////////////////////////
; This file contains only buildings that are part of a player or faction.
; Typically these are the buildings that can be build by the player or
; are part of a base.  Objects related to these buildings also appear
; in this file such as debris.
;//////////////////////////////////////////////////////////////////////////////

;------------------------------------------------------------------------------
;Note that we must have this GLA Hole defined before we do any of the
;object reskins with it later in this file
;------------------------------------------------------------------------------
Object GLAHole

  ; *** ART Parameters ***
  SelectPortrait           = SUHole_L
  ButtonImage              = SUHole
  Draw                     = W3DModelDraw  ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  
; ----------------- the door -------------------
  Draw                = W3DModelDraw ModuleTag_02

    OkToChangeModelColor   = Yes

    DefaultConditionState
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DOOR_1_OPENING
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_CLOSING
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   

    ConditionState    = DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End

    ConditionState    = SOLD
      Model           = NONE
    End   
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT SNOW

  End  
     
  PlacementViewAngle       = -135

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:GLAHole
  Side              = GLA
  EditorSorting     = SYSTEM
  Prerequisites
    Object = GLACommandCenter
  End
  BuildCost         = 100
  BuildTime         = 10.0           ; in seconds
  EnergyProduction  = 0
  VisionRange       = 50.0           ; Shroud clearing distance
  ShroudClearingRange = 50
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = GLAHoleSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE IMMUNE_TO_CAPTURE SCORE_DESTROY MP_COUNT_FOR_VICTORY
  Body              = StructureBody ModuleTag_03
    ; To set the health for a particular hole, edit the entry in the object
    ; that will leave the hole behind (edit the RebuildHoleExposeDie entry)
    MaxHealth       = 9999999.9  ;bigger than anything realistic we use
    InitialHealth   = 9999999.9  ;bigger than anything realistic we use
  End
  Behavior                    = RebuildHoleBehavior ModuleTag_04
    WorkerObjectName          = GLAInfantryWorkerHole
    WorkerRespawnDelay        = 20000 ;in milliseconds
    HoleHealthRegen%PerSecond = 0.5%    ;regen this % of HoleMaxHealth per second
  End 
  
  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureSmallDeath
  End
  
  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End    
  
  Geometry            = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight      = 5.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;This one is for base defenses. This object didn't have MP_COUNT_FOR_VICTORY
;KindOf so if there are any base defenses that on "hole" condition still exist
;the player will be defeated. ## Thanks to Project0300 Team for this bug report
;------------------------------------------------------------------------------
Object GLAHole_BaseDefense

  ; *** ART Parameters ***
  SelectPortrait           = SUHole_L
  ButtonImage              = SUHole
  Draw                     = W3DModelDraw  ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  
; ----------------- the door -------------------
  Draw                = W3DModelDraw ModuleTag_02

    OkToChangeModelColor   = Yes

    DefaultConditionState
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DOOR_1_OPENING
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_CLOSING
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBHole_A1
      Animation       = UBHole_A1.UBHole_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   

    ConditionState    = DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBHole_A1D
      Animation       = UBHole_A1D.UBHole_A1D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End

    ConditionState    = SOLD
      Model           = NONE
    End   
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT SNOW

  End  
     
  PlacementViewAngle       = -135

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:GLAHole
  Side              = GLA
  EditorSorting     = SYSTEM
  Prerequisites
    Object = GLACommandCenter
  End
  BuildCost         = 100
  BuildTime         = 10.0           ; in seconds
  EnergyProduction  = 0
  VisionRange       = 50.0           ; Shroud clearing distance
  ShroudClearingRange = 50
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = GLAHoleSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE IMMUNE_TO_CAPTURE SCORE_DESTROY ;MP_COUNT_FOR_VICTORY
  Body              = StructureBody ModuleTag_03
    ; To set the health for a particular hole, edit the entry in the object
    ; that will leave the hole behind (edit the RebuildHoleExposeDie entry)
    MaxHealth       = 9999999.9  ;bigger than anything realistic we use
    InitialHealth   = 9999999.9  ;bigger than anything realistic we use
  End
  Behavior                    = RebuildHoleBehavior ModuleTag_04
    WorkerObjectName          = GLAInfantryWorkerHole
    WorkerRespawnDelay        = 20000 ;in milliseconds
    HoleHealthRegen%PerSecond = 0.5%    ;regen this % of HoleMaxHealth per second
  End 
  
  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureSmallDeath
  End
  
  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End    
  
  Geometry            = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight      = 5.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;GLA Command Center
Object GLACommandCenter

  ; *** ART Parameters ***
  SelectPortrait         = SUHeadquarters_L
  ButtonImage            = SUHeadquarters
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  ; ----- The actual command center
  Draw                   = W3DModelDraw ModuleTag_01
     
    OkToChangeModelColor = Yes
    
    ; day
    ConditionState       = NONE
      Model              = UBCmdHQ
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ.UBCmdHQ
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = UBCmdHQ_D
      Animation          = UBCmdHQ_D.UBCmdHQ_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = UBCmdHQ_E
      Animation          = UBCmdHQ_E.UBCmdHQ_E
      AnimationMode      = LOOP
    End    
    ConditionState         = GARRISONED
      Model                = UBCmdHQEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG.UBCmdHQEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBCmdHQEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_D.UBCmdHQEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBCmdHQEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_E.UBCmdHQEG_E
      AnimationMode        = LOOP
    End

    ; night    
    ConditionState       = NIGHT
      Model              = UBCmdHQ_N
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ_N.UBCmdHQ_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = UBCmdHQ_DN
      Animation          = UBCmdHQ_DN.UBCmdHQ_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = UBCmdHQ_EN
      Animation          = UBCmdHQ_EN.UBCmdHQ_EN
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBCmdHQEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_N.UBCmdHQEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBCmdHQEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DN.UBCmdHQEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBCmdHQEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_EN.UBCmdHQEG_EN
      AnimationMode        = LOOP
    End
    
        ; day snow
    ConditionState       = SNOW
      Model              = UBCmdHQ_S
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ_S.UBCmdHQ_S
      AnimationMode      = LOOP
    End   
    ConditionState       = DAMAGED SNOW
      Model              = UBCmdHQ_DS
      Animation          = UBCmdHQ_DS.UBCmdHQ_DS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = UBCmdHQ_ES
      Animation          = UBCmdHQ_ES.UBCmdHQ_ES
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBCmdHQEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_S.UBCmdHQEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBCmdHQEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DS.UBCmdHQEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBCmdHQEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_ES.UBCmdHQEG_ES
      AnimationMode        = LOOP
    End
    
    ; night snow
    ConditionState       = NIGHT SNOW
      Model              = UBCmdHQ_NS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ_NS.UBCmdHQ_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBCmdHQ_DNS
      Animation          = UBCmdHQ_DNS.UBCmdHQ_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = UBCmdHQ_ENS
      Animation          = UBCmdHQ_ENS.UBCmdHQ_ENS
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_NS.UBCmdHQEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DNS.UBCmdHQEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_ENS.UBCmdHQEG_ENS
      AnimationMode        = LOOP
    End


        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBCmdHQ
      Animation          = UBCmdHQ.UBCmdHQ
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBCmdHQ_D
      Animation          = UBCmdHQ_D.UBCmdHQ_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBCmdHQ_E
      Animation          = UBCmdHQ_E.UBCmdHQ_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBCmdHQ_N
      Animation          = UBCmdHQ_N.UBCmdHQ_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBCmdHQ_DN
      Animation          = UBCmdHQ_DN.UBCmdHQ_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBCmdHQ_EN
      Animation          = UBCmdHQ_EN.UBCmdHQ_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBCmdHQ_S
      Animation          = UBCmdHQ_S.UBCmdHQ_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBCmdHQ_DS
      Animation          = UBCmdHQ_DS.UBCmdHQ_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBCmdHQ_ES
      Animation          = UBCmdHQ_ES.UBCmdHQ_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBCmdHQ_NS
      Animation          = UBCmdHQ_NS.UBCmdHQ_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBCmdHQ_DNS
      Animation          = UBCmdHQ_DNS.UBCmdHQ_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBCmdHQ_ENS
      Animation          = UBCmdHQ_ENS.UBCmdHQ_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End

  ; ------------ construction done flashing lights ----------
;  Draw = W3DModelDraw
;    DefaultConditionState
;      Model           = None
;    End
;    ConditionState    = SOLD
;      Model           = NONE
;    End    
;    ConditionState    = CONSTRUCTION_COMPLETE
;      Model           = ABWarFact_A2
;      Animation       = ABWarFact_A2.ABWarFact_A2
;      AnimationMode   = LOOP
;      Flags           = START_FRAME_FIRST
;    End  
;  End
    
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CommandCenter
  Side                = GLA
  EditorSorting       = STRUCTURE
  BuildCost           = 2000
  BuildTime           = 45.0           ; in seconds
  EnergyProduction    = 0  ;Command center should be free
  CommandSet          = GLACommandCenterCommandSet
  VisionRange         = 300.0           ; Shroud clearing distance
  ShroudClearingRange = 300
  ArmorSet
    Conditions        = None
    Armor             = StructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = CommandCenterGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    VoiceNoBuild = GLACommandCenterVoiceBuildNot_Eva  ;special for Sneak Attack placement
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE COMMANDCENTER CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 5000.0
    InitialHealth     = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = ProductionUpdate ModuleTag_05
    ; nothing
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_06
    UnitCreatePoint   = X: 25.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 65.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior             = RebuildHoleExposeDie ModuleTag_07
    HoleName      = GLAHoleCommandCenter
    HoleMaxHealth = 500.0
  End
  Behavior             = DestroyDie ModuleTag_08
    ;nothing
  End  
  Behavior             = CreateObjectDie ModuleTag_09
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_10
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior           = OCLSpecialPower ModuleTag_11
    SpecialPowerTemplate = SuperweaponRebelAmbush
    UpgradeOCL           = SCIENCE_RebelAmbush3 SUPERWEAPON_RebelAmbush3
    UpgradeOCL           = SCIENCE_RebelAmbush2 SUPERWEAPON_RebelAmbush2
    OCL                  = SUPERWEAPON_RebelAmbush1
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End

  Behavior           = OCLSpecialPower ModuleTag_12
    SpecialPowerTemplate = SuperweaponBlackMarketNuke
    OCL                  = SUPERWEAPON_BlackMarketNuke
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Behavior           = OCLSpecialPower ModuleTag_13
    SpecialPowerTemplate = SuperweaponAnthraxBomb
    OCL                  = SUPERWEAPON_AnthraxBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_14
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_21
    SpecialPowerTemplate = SuperweaponSneakAttack
    OCL                  = OCL_CreateSneakAttackTunnelStart
    ReferenceObject      = GLASneakAttackTunnelNetwork
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_22
    SpecialPowerTemplate = SuperweaponGPSScrambler
    OCL                  = SUPERWEAPON_GPSScrambler
    CreateLocation       = CREATE_AT_LOCATION
  End


  Behavior = CashBountyPower ModuleTag_15
    SpecialPowerTemplate    = SpecialAbilityCashBounty1
    Bounty                  = 5%
  End
  Behavior = CashBountyPower ModuleTag_16
    SpecialPowerTemplate    = SpecialAbilityCashBounty2
    Bounty                  = 10%
  End
  Behavior = CashBountyPower ModuleTag_17
    SpecialPowerTemplate    = SpecialAbilityCashBounty3
    Bounty                  = 20%
  End
 
  Behavior = FlammableUpdate ModuleTag_19
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior           = OCLSpecialPower ModuleTag_DemoDrop01
    SpecialPowerTemplate = SuperweaponGLADemoDrop
    UpgradeOCL           = SCIENCE_GLADemoDrop3 SUPERWEAPON_DemoDrop3
    UpgradeOCL           = SCIENCE_GLADemoDrop2 SUPERWEAPON_DemoDrop2
    OCL                  = SUPERWEAPON_DemoDrop1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Behavior           = OCLSpecialPower ModuleTag_Demoralize01
    SpecialPowerTemplate = SuperweaponDemoralize
    OCL                  = SUPERWEAPON_Demoralize
    CreateLocation       = CREATE_AT_LOCATION
  End

  Geometry            = BOX
  GeometryMajorRadius = 65.0
  GeometryMinorRadius = 65.0
  GeometryHeight      = 54.0
  FactoryExitWidth    = 25 
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleCommandCenter GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBCmdHQ_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED RUBBLE

    ConditionState         = SNOW
      Model                = UBCmdHQ_RS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED RUBBLE SNOW

    ConditionState         = GARRISONED
      Model                = UBCmdHqEG_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED RUBBLE

    ConditionState         = GARRISONED SNOW
      Model                = UBCmdHqEG_RS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED RUBBLE SNOW

  End

End

;------------------------------------------------------------------------------
;Fake GLA Command Center
Object FakeGLACommandCenter

  ; *** ART Parameters ***
  SelectPortrait         = SUHeadquarters_L
  ButtonImage            = SUHeadquarters
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  ; ----- The actual command center
  Draw                   = W3DModelDraw ModuleTag_01
     
    OkToChangeModelColor = Yes
    
    ; day
    ConditionState       = NONE
      Model              = UBCmdHQ
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ.UBCmdHQ
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = UBCmdHQ_D
      Animation          = UBCmdHQ_D.UBCmdHQ_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = UBCmdHQ_E
      Animation          = UBCmdHQ_E.UBCmdHQ_E
      AnimationMode      = LOOP
    End    
    ConditionState         = GARRISONED
      Model                = UBCmdHQEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG.UBCmdHQEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBCmdHQEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_D.UBCmdHQEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBCmdHQEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_E.UBCmdHQEG_E
      AnimationMode        = LOOP
    End

    ; night    
    ConditionState       = NIGHT
      Model              = UBCmdHQ_N
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ_N.UBCmdHQ_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = UBCmdHQ_DN
      Animation          = UBCmdHQ_DN.UBCmdHQ_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = UBCmdHQ_EN
      Animation          = UBCmdHQ_EN.UBCmdHQ_EN
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBCmdHQEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_N.UBCmdHQEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBCmdHQEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DN.UBCmdHQEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBCmdHQEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_EN.UBCmdHQEG_EN
      AnimationMode        = LOOP
    End
    
        ; day snow
    ConditionState       = SNOW
      Model              = UBCmdHQ_S
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ_S.UBCmdHQ_S
      AnimationMode      = LOOP
    End   
    ConditionState       = DAMAGED SNOW
      Model              = UBCmdHQ_DS
      Animation          = UBCmdHQ_DS.UBCmdHQ_DS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = UBCmdHQ_ES
      Animation          = UBCmdHQ_ES.UBCmdHQ_ES
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBCmdHQEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_S.UBCmdHQEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBCmdHQEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DS.UBCmdHQEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBCmdHQEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_ES.UBCmdHQEG_ES
      AnimationMode        = LOOP
    End
    
    ; night snow
    ConditionState       = NIGHT SNOW
      Model              = UBCmdHQ_NS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQ_NS.UBCmdHQ_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBCmdHQ_DNS
      Animation          = UBCmdHQ_DNS.UBCmdHQ_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = UBCmdHQ_ENS
      Animation          = UBCmdHQ_ENS.UBCmdHQ_ENS
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_NS.UBCmdHQEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DNS.UBCmdHQEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_ENS.UBCmdHQEG_ENS
      AnimationMode        = LOOP
    End


        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBCmdHQ
      Animation          = UBCmdHQ.UBCmdHQ
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBCmdHQ_D
      Animation          = UBCmdHQ_D.UBCmdHQ_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBCmdHQ_E
      Animation          = UBCmdHQ_E.UBCmdHQ_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBCmdHQ_N
      Animation          = UBCmdHQ_N.UBCmdHQ_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBCmdHQ_DN
      Animation          = UBCmdHQ_DN.UBCmdHQ_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBCmdHQ_EN
      Animation          = UBCmdHQ_EN.UBCmdHQ_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBCmdHQ_S
      Animation          = UBCmdHQ_S.UBCmdHQ_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBCmdHQ_DS
      Animation          = UBCmdHQ_DS.UBCmdHQ_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBCmdHQ_ES
      Animation          = UBCmdHQ_ES.UBCmdHQ_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBCmdHQ_NS
      Animation          = UBCmdHQ_NS.UBCmdHQ_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBCmdHQ_DNS
      Animation          = UBCmdHQ_DNS.UBCmdHQ_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBCmdHQ_ENS
      Animation          = UBCmdHQ_ENS.UBCmdHQ_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End

  ; ------------ construction done flashing lights ----------
;  Draw = W3DModelDraw
;    DefaultConditionState
;      Model           = None
;    End
;    ConditionState    = SOLD
;      Model           = NONE
;    End    
;    ConditionState    = CONSTRUCTION_COMPLETE
;      Model           = ABWarFact_A2
;      Animation       = ABWarFact_A2.ABWarFact_A2
;      AnimationMode   = LOOP
;      Flags           = START_FRAME_FIRST
;    End  
;  End
    
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CommandCenter
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    ;Object = GLACommandCenter
  End
  BuildCost           = 500
  BuildTime           = 22.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLACommandCenterCommandSet
  VisionRange         = 300.0           ; Shroud clearing distance
  ShroudClearingRange = 300

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FAKE COMMANDCENTER ;COMMANDCENTER added to fools InternetCenter users

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 1250.0
    InitialHealth     = 1250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1450
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLACommandCenter
    TriggeredBy = Upgrade_BecomeRealGLACommandCenter
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 65.0
  GeometryMinorRadius = 65.0
  GeometryHeight      = 54.0
  FactoryExitWidth    = 25 
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 165
  ShadowSizeY = 145
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object GLABlackMarket

  ; *** ART Parameters ***
  SelectPortrait         = SUBlackMarket_L
  ButtonImage            = SUBlackMarket
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState    = NONE
      Model           = UBBlackMkt
      Animation       = UBBlackMkt.UBBlackMkt
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED
      Model           = UBBlackMkt_D
      Animation       = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBBlackMkt_E
      Animation       = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED
      Model                = UBBlkMktEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG.UBBlkMktEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBlkMktEG_D
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_D.UBBlkMktEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBlkMktEG_E
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_E.UBBlkMktEG_E
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState    = SNOW
      Model           = UBBlackMkt_S
      Animation       = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED SNOW
      Model           = UBBlackMkt_DS
      Animation       = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBBlackMkt_ES
      Animation       = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBlkMktEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_S.UBBlkMktEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_DS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DS.UBBlkMktEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_ES
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_ES.UBBlkMktEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT 
      Model           = UBBlackMkt_N
      Animation       = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBBlackMkt_DN
      Animation       = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBBlackMkt_EN
      Animation       = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBlkMktEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_N.UBBlkMktEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_DN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DN.UBBlkMktEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_EN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_EN.UBBlkMktEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBBlackMkt_NS
      Animation       = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBBlackMkt_DNS
      Animation       = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBBlackMkt_ENS
      Animation       = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_NS.UBBlkMktEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_DNS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DNS.UBBlkMktEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_ENS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_ENS.UBBlkMktEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBlackMkt
      Animation          = UBBlackMkt.UBBlackMkt
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBlackMkt_D
      Animation          = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBlackMkt_E
      Animation          = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBlackMkt_N
      Animation          = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBlackMkt_DN
      Animation          = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBlackMkt_EN
      Animation          = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBlackMkt_S
      Animation          = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBlackMkt_DS
      Animation          = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ES
      Animation          = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBlackMkt_NS
      Animation          = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBlackMkt_DNS
      Animation          = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ENS
      Animation          = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End  

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT

    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End   
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End   
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackMarket
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = GLAPalace
  End
  BuildCost           = 2500
  BuildTime           = 30.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = GLABlackMarketCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = BlackMarketSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY SCORE_CREATE FS_BLACK_MARKET
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 1000.0
    InitialHealth     = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = AutoDepositUpdate ModuleTag_05
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 20   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End

  Behavior = ProductionUpdate ModuleTag_06
    ; nothing
  End

  Behavior                 = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior                 = RebuildHoleExposeDie ModuleTag_08
    HoleName          = GLAHoleBlackMarket
    HoleMaxHealth     = 500.0
  End 
  Behavior                 = CreateObjectDie ModuleTag_09
    CreationList      = OCL_ABPowerPlantExplode
  End
  Behavior                 = FXListDie ModuleTag_10
    DeathFX           = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 35.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleBlackMarket GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes

    ConditionState         = NONE
      Model                = UBBlackMkt_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED RUBBLE

    ConditionState         = SNOW
      Model                = UBBlackMkt_RS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED RUBBLE SNOW

    ConditionState         = GARRISONED
      Model                = UBBlkMktEG_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED RUBBLE

    ConditionState         = GARRISONED SNOW
      Model                = UBBlkMktEG_RS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED RUBBLE SNOW

  End

End

;------------------------------------------------------------------------------
Object FakeGLABlackMarket

  ; *** ART Parameters ***
  SelectPortrait         = SUBlackMarket_L
  ButtonImage            = SUBlackMarket
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState    = NONE
      Model           = UBBlackMkt
      Animation       = UBBlackMkt.UBBlackMkt
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED
      Model           = UBBlackMkt_D
      Animation       = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBBlackMkt_E
      Animation       = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED
      Model                = UBBlkMktEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG.UBBlkMktEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBlkMktEG_D
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_D.UBBlkMktEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBlkMktEG_E
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_E.UBBlkMktEG_E
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState    = SNOW
      Model           = UBBlackMkt_S
      Animation       = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED SNOW
      Model           = UBBlackMkt_DS
      Animation       = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBBlackMkt_ES
      Animation       = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBlkMktEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_S.UBBlkMktEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_DS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DS.UBBlkMktEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_ES
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_ES.UBBlkMktEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT 
      Model           = UBBlackMkt_N
      Animation       = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBBlackMkt_DN
      Animation       = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBBlackMkt_EN
      Animation       = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBlkMktEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_N.UBBlkMktEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_DN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DN.UBBlkMktEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_EN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_EN.UBBlkMktEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBBlackMkt_NS
      Animation       = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBBlackMkt_DNS
      Animation       = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBBlackMkt_ENS
      Animation       = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_NS.UBBlkMktEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_DNS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DNS.UBBlkMktEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_ENS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_ENS.UBBlkMktEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBlackMkt
      Animation          = UBBlackMkt.UBBlackMkt
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBlackMkt_D
      Animation          = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBlackMkt_E
      Animation          = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBlackMkt_N
      Animation          = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBlackMkt_DN
      Animation          = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBlackMkt_EN
      Animation          = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBlackMkt_S
      Animation          = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBlackMkt_DS
      Animation          = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ES
      Animation          = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBlackMkt_NS
      Animation          = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBlackMkt_DNS
      Animation          = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ENS
      Animation          = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End  

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT

    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End   
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End   
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackMarket
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = GLAPalace
  End
  BuildCost           = 625
  BuildTime           = 15.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLABlackMarketCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FAKE

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 250.0
    InitialHealth     = 250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 325
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABPowerPlantExplode
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLABlackMarket
    TriggeredBy = Upgrade_BecomeRealGLABlackMarket
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AutoDepositUpdate ModuleTag_FakeMoney
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 20   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
    ActualMoney = No ; Display only so I look like a BlackMarket
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 35.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 108
  ShadowSizeY = 96
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object GLAScudStorm

  ; *** ART Parameters ***
  SelectPortrait         = SUScudStorm_L
  ButtonImage            = SUScudStorm

  UpgradeCameo1 = Upgrade_GLAAnthraxBeta
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    ; day
    ConditionState = NONE ; lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY Trans_ATTACKING ; from lying around to straight up
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B

    TransitionState = Trans_ATTACKING Trans_READY ; empty arms going underground, coming up with presents for bad people
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ; day
    ConditionState = DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED Trans_ATTACKING_DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED Trans_READY_DAMAGED
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED Trans_ATTACKING_REALLYDAMAGED
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED Trans_READY_REALLYDAMAGED
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ;  SNOW
    ConditionState =  SNOW ; from underground to lying around
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_SNOW Trans_ATTACKING_SNOW
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING  SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2S
      Animation     = UBScudStrm_A2S.UBScudStrm_A2S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B  SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B SNOW

    TransitionState = Trans_ATTACKING_SNOW Trans_READY_SNOW ; empty arms going underground
      Model         = UBScudStrm_A3S
      Animation     = UBScudStrm_A3S.UBScudStrm_A3S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED  SNOW
      Model              = UBScudStrm_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED  SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED  SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_SNOW Trans_ATTACKING_DAMAGED_SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED SNOW
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_SNOW Trans_READY_DAMAGED_SNOW
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_SNOW Trans_ATTACKING_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_SNOW Trans_READY_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT
    ConditionState = NIGHT ; from underground to lying around
      Model         = UBScudStrm_A1N
      Animation     = UBScudStrm_A1N.UBScudStrm_A1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHT Trans_ATTACKING_NIGHT
      Model         = UBScudStrm_A1N
      Animation     = UBScudStrm_A1N.UBScudStrm_A1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING NIGHT  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2N
      Animation     = UBScudStrm_A2N.UBScudStrm_A2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT

    TransitionState = Trans_ATTACKING_NIGHT Trans_READY_NIGHT ; empty arms going underground
      Model         = UBScudStrm_A3N
      Animation     = UBScudStrm_A3N.UBScudStrm_A3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBScudStrm_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
      Model              = UBScudStrm_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
      Model              = UBScudStrm_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHT Trans_ATTACKING_DAMAGED_NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED NIGHT
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHT Trans_READY_DAMAGED_NIGHT
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHT Trans_ATTACKING_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHT Trans_READY_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT SNOW
    ConditionState = NIGHT SNOW ; from underground to lying around
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHTSNOW Trans_ATTACKING_NIGHTSNOW
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING NIGHT SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2NS
      Animation     = UBScudStrm_A2NS.UBScudStrm_A2NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT SNOW

    TransitionState = Trans_ATTACKING_NIGHTSNOW Trans_READY_NIGHTSNOW ; empty arms going underground
      Model         = UBScudStrm_A3NS
      Animation     = UBScudStrm_A3NS.UBScudStrm_A3NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBScudStrm_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
      Model              = UBScudStrm_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
      Model              = UBScudStrm_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHTSNOW Trans_ATTACKING_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHTSNOW Trans_READY_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHTSNOW Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW Trans_READY_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End

    ;-------------------------------------------------------------------------------------------------------------------------
    ;-------------------------------------------------------------------------------------------------------------------------
    ;-------------------------------------------------------------------------------------------------------------------------

  ;---- Blinking red light in middle -----
  Draw = W3DModelDraw ModuleTag_02
    IgnoreConditionStates = NIGHT SNOW DAMAGED
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = PREATTACK_B ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = REALLYDAMAGED
      Model         = NONE
    End
    AliasConditionState = PREATTACK_B ATTACKING REALLYDAMAGED
    AliasConditionState = ATTACKING REALLYDAMAGED
    AliasConditionState = RUBBLE
    AliasConditionState = SOLD
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED

  End

  ;------ Canvas roof and aerial -----
  Draw = W3DModelDraw ModuleTag_03
    IgnoreConditionStates = NIGHT ;SNOW
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = UBScudStrm_A6
      Animation     = UBScudStrm_A6.UBScudStrm_A6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState = SNOW
      Model         = UBScudStr_A6S
      Animation     = UBScudStr_A6S.UBScudStr_A6S
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState = DAMAGED
      Model         = UBScudStrm_DA6
      Animation     = UBScudStrm_DA6.UBScudStrm_DA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState = DAMAGED SNOW
    
    ConditionState = REALLYDAMAGED
      Model         = UBScudStrm_EA6
      Animation     = UBScudStrm_EA6.UBScudStrm_EA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState = REALLYDAMAGED SNOW
    AliasConditionState = RUBBLE
    AliasConditionState = RUBBLE SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm_A6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBScudStr_A6S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_DA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_EA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED RUBBLE SNOW

    ConditionState       = SOLD
      Model              = NONE
    End
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD DAMAGED SNOW
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED SNOW
    AliasConditionState  = SOLD RUBBLE
    AliasConditionState  = SOLD RUBBLE SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION RUBBLE SNOW
    
  End

  ;----- GLA Flag -----
  Draw = W3DModelDraw ModuleTag_04
    IgnoreConditionStates = NIGHT SNOW
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = UBScudStrm_F
      Animation     = UBScudStrm_F.UBScudStrm_F
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  DAMAGED
      Model         = UBScudStrm_DF
      Animation     = UBScudStrm_DF.UBScudStrm_DF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  REALLYDAMAGED
      Model         = UBScudStrm_EF
      Animation     = UBScudStrm_EF.UBScudStrm_EF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState = RUBBLE

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm_F
      Animation          = UBScudStrm_F.UBScudStrm_F
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_DF
      Animation          = UBScudStrm_DF.UBScudStrm_DF
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_EF
      Animation          = UBScudStrm_EF.UBScudStrm_EF
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED RUBBLE
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION RUBBLE
  End
   
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End    
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End   
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBScudStrmF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBScudStrmF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBScudStrmF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBScudStrmF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBScudStrmF_SD
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBScudStrmF_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End
  
  ; ------------ New SCUD Storm Goo  -----------------
  Draw = W3DModelDraw ModuleTag_ScudGoo01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = NIGHT SNOW DAMAGED REALLYDAMAGED RUBBLE

    DefaultConditionState
      Model = UBScudStrm_B
      TransitionKey = Trans_READY
    End
    TransitionState = Trans_READY Trans_ATTACKING
      ParticleSysBone = FXBone01 ScudStormBuildingGoo
      ParticleSysBone = FXBone02 ScudStormBuildingGoo
      ParticleSysBone = FXBone03 ScudStormBuildingGoo
    End
    ConditionState = ATTACKING
      ParticleSysBone = FXBone01 ScudStormBuildingGoo
      ParticleSysBone = FXBone02 ScudStormBuildingGoo
      ParticleSysBone = FXBone03 ScudStormBuildingGoo
      TransitionKey = Trans_ATTACKING
    End
    AliasConditionState = ATTACKING FIRING_B
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B

    ConditionState = USER_1
      Model = UBScudStrm_B
      TransitionKey = Trans_READY_Upgraded
    End
    TransitionState = Trans_READY_Upgraded Trans_ATTACKING_Upgraded
      ParticleSysBone = FXBone01 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone02 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone03 ScudStormBuildingGooBeta
    End
    ConditionState = ATTACKING USER_1
      ParticleSysBone = FXBone01 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone02 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone03 ScudStormBuildingGooBeta
      TransitionKey = Trans_ATTACKING_Upgraded
    End
    AliasConditionState = ATTACKING FIRING_B USER_1
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B USER_1

    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UBScudStrm_B
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED USER_1

    ConditionState = SOLD
      Model = None
    End
    AliasConditionState = SOLD USER_1

  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScudStorm
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLAPalace
  End
  BuildCost        = 5000
  BuildTime        = 60.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = GLAScudStormCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ShroudRevealToAllRange = 60  ; Reveals shroud to all players at a specific amount which can be different. 
                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY   DummyWeapon
    AutoChooseSources = PRIMARY   NONE
    Weapon            = SECONDARY ScudStormWeapon
    AutoChooseSources = SECONDARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = GLAUpgradedStructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 400 400 400 400  ; Experience point value at each level
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = ScudStorm

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudStormSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart = NoSound
    TurretMoveLoop = NoSound ;These aren't playing properly, will revisit (mp) TurretMoveLoopLoud
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY SCORE_CREATE FS_SUPERWEAPON
  Body            = StructureBody ModuleTag_07
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 4200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleScudStorm
    HoleMaxHealth = 500.0
  End 

  Behavior = AIUpdateInterface ModuleTag_09
  End

  Behavior    = OCLSpecialPower ModuleTag_10
    SpecialPowerTemplate = SuperweaponScudStorm
    OCL                  = SUPERWEAPON_ScudStorm
  End
  Behavior = SpecialPowerCreate ModuleTag_11
    ;nothing
  End

  Behavior = DestroyDie ModuleTag_12
    ;nothing
  End

  ;upgradable poison field
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13
    DeathWeapon = ScudStormBuildingDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLAAnthraxBeta
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13Beta
    DeathWeapon = ScudStormBuildingDeathWeaponUpgraded
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAAnthraxBeta
  End

  Behavior        = CreateObjectDie ModuleTag_14
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = RadiusDecalUpdate ModuleTag_17
    ; nothing
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior        = FXListDie ModuleTag_19
    DeathFX       = FX_BuildingDie
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Weapon01Visual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLAAnthraxBeta
  End

  Geometry            = BOX
  GeometryMajorRadius = 71.0
  GeometryMinorRadius = 67.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleScudStorm GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
;Remove comments for this section and replace the model entries for the
;pristine, and damage/reallydamaged rubble around the GLA hole below

  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBScudStrm_R
    End
    ConditionState         = SNOW
      Model                = UBScudStrm_RS
    End
  End

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = ScudStorm

End

;------------------------------------------------------------------------------
;GLA Demo Trap

Object GLADemoTrap

  ; *** ART Parameters ***
  SelectPortrait         = SSHideBomb_L
  ButtonImage            = SSHideBomb
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model         = EXHideBomb
      Animation     = EXHideBomb.EXHideBomb
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE

    ConditionState  = NIGHT
      Model         = EXHideBomb
      Animation     = EXHideBomb.EXHideBomb
      AnimationMode = LOOP
      AnimationSpeedFactorRange = 0.2 0.2
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = EXHideBomb
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = EXHideBomb
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = EXHideBomb
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
    
  End

  ; -------- construction-zone fence - to make it easier to select while constructing -------------
  Draw = W3DModelDraw ModuleTag_PickBox
    AnimationsRequirePower = No
    IgnoreConditionStates = SNOW NIGHT

    DefaultConditionState
      Model = None
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = EXHideBomb_A4
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DemoTrap
  Side             = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLAArmsDealer
  End
  BuildCost        = 400
  BuildTime        = 5.0           ; in seconds
  EnergyProduction = 0
  VisionRange     = 150.0           ; Shroud clearing distance
  ShroudClearingRange     = 150.0           ; Shroud clearing distance
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  WeaponSet
    ;The weapon set is used to determine detonation mode
    Conditions = None 
    Weapon = PRIMARY    DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = TERTIARY   DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   NONE
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = DefaultDamageFX ; Too small for normal building FX, but if we do make dedicated one it should be silent
  End

  CommandSet = GLADemoTrapCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = UndergroundGeneratorSelect
  SoundOnDamaged        = NoSound
  SoundOnReallyDamaged  = NoSound

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE DEMOTRAP SALVAGER
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0   
    InitialHealth   = 100.0
  End

  Behavior = StealthUpdate ModuleTag_03
    StealthDelay = 0 ; msec
    StealthForbiddenConditions = NONE
    FriendlyOpacityMin = 100.0%
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = DemoTrapUpdate ModuleTag_04
    DefaultProximityMode      = Yes       ;If yes, defaults to proximity mode, otherwise defaults to manual.
    DetonationWeaponSlot      = PRIMARY   ;The slot the weapon is in when it detonates.
    ProximityModeWeaponSlot   = SECONDARY ;The slot proximity mode is determined by (bogus weapon)
    ManualModeWeaponSlot      = TERTIARY  ;The slot manual mode is determined by (bogus weapon)
    TriggerDetonationRange    = 40.0      ;Detonation range when in proximity mode (and must be on ground)
    IgnoreTargetTypes         = PROJECTILE UNATTACKABLE
    AutoDetonationWithFriendsInvolved = Yes ;GLA are low tech 
;    DetonationWeapon          = DemoTrapDetonationWeapon
    DetonateWhenKilled        = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 1000
    FX = INITIAL FX_GLADemoTrapWarning
    Weapon = FINAL DemoTrapDetonationWeapon
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = InstantDeathBehavior ModuleTag_08
    ; if we are under construction, use this death instead
    RequiredStatus = UNDER_CONSTRUCTION
    ; no effect
  End

  BuildCompletion = PLACED_BY_PLAYER
  
  Shadow          = SHADOW_VOLUME
  Geometry = CYLINDER
  GeometryMajorRadius = 4.0
  GeometryHeight = 9    
  GeometryIsSmall = Yes 

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleDemoTrap GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
;Remove comments for this section and replace the model entries for the
;pristine, and damage/reallydamaged rubble around the GLA hole below
;  Draw                     = W3DModelDraw
;    OkToChangeModelColor   = Yes
;    ConditionState         = NONE
;      Model                = UBSupply_R
;    End
;    ConditionState         = DAMAGED REALLYDAMAGED
;      Model                = UBSupply_R
;    End
;  End
End

; -----------------------------------------------------------------------------
Object GLATunnelNetwork

  ; *** ART Parameters ***
  SelectPortrait         = SUTunnel_L
  ButtonImage            = SUTunnel

  UpgradeCameo1           = Upgrade_GLAAPBullets
  UpgradeCameo2           = Upgrade_GLAFortifiedStructure
  UpgradeCameo3           = Upgrade_GLACamoNetting
  ;UpgradeCameo4           = NONE
  ;UpgradeCameo5           = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model             = UBUndTunn
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState      = DAMAGED
      Model             = UBUndTunn_D
    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBUndTunn_E
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW
      Model             = UBUndTunn_S
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBUndTunn_DS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunn_ES
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    
    
    ConditionState      = NIGHT
      Model             = UBUndTunn_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBUndTunn_DN
    End
    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBUndTunn_EN
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW NIGHT
      Model             = UBUndTunn_NS
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBUndTunn_DNS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBUndTunn_ENS
      ParticleSysBone   = Steam01 SteamVent
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBUndTunn
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBUndTunn_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBUndTunn_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBUndTunn_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBUndTunn_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBUndTunn_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBUndTunn_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBUndTunn_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBUndTunn_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBUndTunn_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBUndTunn_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBUndTunn_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    =  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBUndTunF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBUndTunF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBUndTunF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBUndTunF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBUndTunF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLABarracks
  End
  BuildCost        = 800
  RefundValue      = 100 ; With nothing (or zero) listed, we sell for half price. 
  BuildTime        = 15.0           ; in seconds
  EnergyProduction = 0
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = TunnelNetworkArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = TunnelNetworkArmorUpgraded
    DamageFX          = StructureDamageFXNoShake
  End
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TunnelNetworkGun
  End

  CommandSet       = GLATunnelNetworkCommandSet
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    TurretMoveLoop        = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SCORE_CREATE AUTO_RALLYPOINT SALVAGER
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthDetectorUpdate ModuleTag_13
    DetectionRate     = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange   = 150   ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = AIUpdateInterface ModuleTag_16
    Turret
      TurretTurnRate        = 180   ;turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End

    AutoAcquireEnemiesWhenIdle = Yes Stealthed; defensive weapon
  End

  Behavior = TunnelContain ModuleTag_05
    TimeForFullHeal     = 5000   ;(in milliseconds)
  End

  ;Kris: Removed this module from because units exiting the container would extract information 
  ;from the wrong exit interface. And we don't appear to need it for the spawns because they
  ;use OpenContain instead.
  ;Behavior = DefaultProductionExitUpdate ModuleTag_06
  ;  UnitCreatePoint   = X:  5.0  Y:  0.0   Z:0.0
  ;  NaturalRallyPoint = X: 35.0  Y:  0.0   Z:0.0
  ;End

  Behavior            = SpawnBehavior ModuleTag_07
    SpawnNumber       = 2
    SpawnReplaceDelay = 9999
    SpawnTemplateName = GLAInfantryTunnelDefender
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End
  Behavior             = RebuildHoleExposeDie ModuleTag_09
    HoleName      = GLAHoleTunnelNetwork
    HoleMaxHealth = 500.0
  End
  Behavior = DestroyDie ModuleTag_10
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABTunnelNetworkDebris
  End
  Behavior             = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = StealthUpdate ModuleTag_17
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_18
    TriggeredBy = Upgrade_GLACamoNetting
  End
  Behavior = ProductionUpdate ModuleTag_19
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleTunnelNetwork GLAHole_BaseDefense ;GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBUndTunn_R
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBUndTunn_R
    End
  End
End

;------------------------------------------------------------------------------
Object GLAStingerSite

  ; *** ART Parameters ***
  SelectPortrait         = SUStinger_L
  ButtonImage            = SUStinger

  UpgradeCameo1          = Upgrade_GLAAPRockets
  UpgradeCameo2          = Upgrade_GLAFortifiedStructure
  UpgradeCameo3          = Upgrade_GLACamoNetting
  ;UpgradeCameo4          = NONE
  ;UpgradeCameo5          = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
    End
    
    ConditionState = DAMAGED
      Model = UBStingerS_D
    End
    
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
    End

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
    End
    
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
    End
    
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
    End
    
    ; night  **********************************
    ConditionState       = NIGHT 
      Model              = UBStingerS_N
    End
    
    ConditionState       = DAMAGED NIGHT 
      Model              = UBStingerS_DN
    End
    
    ConditionState       = REALLYDAMAGED NIGHT  RUBBLE
      Model              = UBStingerS_EN
    End
       
    ; night snow **********************************
    ConditionState       = NIGHT SNOW
      Model              = UBStingerS_NS
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBStingerS_DNS
    End
    
    ConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE
      Model              = UBStingerS_ENS
    End
    
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
     ; Animation          = UBStingerS.UBStingerS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
     ; Animation          = UBStingerS_D.UBStingerS_D
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
     ; Animation          = UBStingerS_E.UBStingerS_E
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBStingerS_N
     ; Animation          = UBStingerS_N.UBStingerS_N
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBStingerS_DN
     ; Animation          = UBStingerS_DN.UBStingerS_DN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBStingerS_EN
     ; Animation          = UBStingerS_EN.UBStingerS_EN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
     ; Animation          = UBStingerS_S.UBStingerS_S
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
     ; Animation          = UBStingerS_DS.UBStingerS_DS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
     ; Animation          = UBStingerS_ES.UBStingerS_ES
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBStingerS_NS
     ; Animation          = UBStingerS_NS.UBStingerS_NS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBStingerS_DNS
     ; Animation          = UBStingerS_DNS.UBStingerS_DNS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBStingerS_ENS
     ; Animation          = UBStingerS_ENS.UBStingerS_ENS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBStngrSF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBStngrSF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBStngrSF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBStngrSF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBStngrSF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBStngrSF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:StingerSite
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object            = GLABarracks
  End
  BuildCost           = 900
  BuildTime           = 15.0           ; in seconds
  EnergyProduction    = 0
  VisionRange         = 600.0           ; Shroud clearing distance
  ShroudClearingRange = 400
  ArmorSet
    Conditions        = None
    Armor             = StingerSiteArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = StingerSiteArmorUpgraded
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = GLAStingerSiteCommandSet
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SPAWNS_ARE_THE_WEAPONS SCORE_CREATE

  Body                 = HiveStructureBody ModuleTag_04 ;Requires SpawnBehavior!
    MaxHealth          = 1000.0
    InitialHealth      = 1000.0
    ;**Careful with these damage types -- because area damage types will already
    ;**damage slaves.
    PropagateDamageTypesToSlavesWhenExisting = NONE +SMALL_ARMS +SNIPER +POISON +RADIATION +SURRENDER +MICROWAVE
    SwallowDamageTypesIfSlavesNotExisting = NONE +SNIPER +RADIATION +SURRENDER +MICROWAVE ;+POISON

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = SpawnPointProductionExitUpdate ModuleTag_05
    SpawnPointBoneName = SpawnPoint
  End

  Behavior                = SpawnBehavior ModuleTag_06
    SpawnNumber           = 3
    SpawnReplaceDelay     = 18000 ;30000 ;msec   ;hey, it's a base defense! make it less useless! :P
    SpawnTemplateName     = GLAInfantryStingerSoldier
    CanReclaimOrphans     = No
    SpawnedRequireSpawner = Yes
    SlavesHaveFreeWill = No
  End
  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 500.0
  End
  Behavior        = DestroyDie ModuleTag_09
    ;<NO DATA>
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior        = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = StingerSiteDeathConcussion
    StartsActive  = Yes
  End
  Behavior = StealthUpdate ModuleTag_13
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLACamoNetting
  End
  Behavior = ProductionUpdate ModuleTag_15
  End
  Behavior                = FlammableUpdate ModuleTag_16
    AflameDuration        = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 5       ; taking this much damage...
    AflameDamageDelay     = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Geometry            = CYLINDER
  GeometryMajorRadius = 36.0
  GeometryHeight      = 9.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleStingerSite GLAHole_BaseDefense ;GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes

    ConditionState         = NONE
      Model                = UBStingerS_R
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED

    ConditionState         = SNOW
      Model                = UBStingerS_RS
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED SNOW

  End
End

;------------------------------------------------------------------------------
Object GLAPalace

  ; *** ART Parameters ***
  SelectPortrait         = SUPalace_L
  ButtonImage            = SUPalace
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    
    
    ; day  
    ConditionState         = NONE
      Model                = UBPalace
      Animation            = UBPalace.UBPalace
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED
      Model                = UBPalace_D
      Animation            = UBPalace_D.UBPalace_D
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBPalace_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED
      Model                = UBPalace_G
      Animation            = UBPalace_G.UBPalace_G
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBPalace_DG
      Animation            = UBPalace_DG.UBPalace_DG
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBPalace_EG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = USER_1
      Model                = UBPalace
      Animation            = UBPalace.UBPalace
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1
      Model                = UBPalace_D
      Animation            = UBPalace_D.UBPalace_D
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1
      Model                = UBPalace_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ConditionState         = USER_1 GARRISONED
      Model                = UBPalace_G
      Animation            = UBPalace_G.UBPalace_G
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1 GARRISONED
      Model                = UBPalace_DG
      Animation            = UBPalace_DG.UBPalace_DG
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 GARRISONED
      Model                = UBPalace_EG
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ; day snow
    ConditionState         = SNOW
      Model                = UBPalace_S
      Animation            = UBPalace_S.UBPalace_S
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED SNOW
      Model                = UBPalace_DS
      Animation            = UBPalace_DS.UBPalace_DS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW
      Model                = UBPalace_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED SNOW
      Model                = UBPalace_SG
      Animation            = UBPalace_SG.UBPalace_SG
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBPalace_DSG
      Animation            = UBPalace_DSG.UBPalace_DSG
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBPalace_ESG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ConditionState         = USER_1 SNOW
      Model                = UBPalace_S
      Animation            = UBPalace_S.UBPalace_S
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1 SNOW
      Model                = UBPalace_DS
      Animation            = UBPalace_DS.UBPalace_DS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW
      Model                = UBPalace_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ConditionState         = USER_1 SNOW GARRISONED
      Model                = UBPalace_SG
      Animation            = UBPalace_SG.UBPalace_SG
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1 SNOW GARRISONED
      Model                = UBPalace_DSG
      Animation            = UBPalace_DSG.UBPalace_DSG
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 GARRISONED SNOW
      Model                = UBPalace_ESG
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ; night  
    ConditionState         = NIGHT
      Model                = UBPalace_N
      Animation            = UBPalace_N.UBPalace_N
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED NIGHT
      Model                = UBPalace_DN
      Animation            = UBPalace_DN.UBPalace_DN
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED RUBBLE NIGHT
      Model                = UBPalace_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
        
    ConditionState         = GARRISONED NIGHT
      Model                = UBPalace_NG
      Animation            = UBPalace_NG.UBPalace_NG
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBPalace_DGN
      Animation            = UBPalace_DGN.UBPalace_DGN
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBPalace_ENG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ConditionState         = USER_1 NIGHT
      Model                = UBPalace_N
      Animation            = UBPalace_N.UBPalace_N
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1 NIGHT
      Model                = UBPalace_DN
      Animation            = UBPalace_DN.UBPalace_DN
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 NIGHT
      Model                = UBPalace_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ConditionState         = USER_1 NIGHT GARRISONED
      Model                = UBPalace_NG
      Animation            = UBPalace_NG.UBPalace_NG
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1 NIGHT GARRISONED
      Model                = UBPalace_DGN
      Animation            = UBPalace_DGN.UBPalace_DGN
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 NIGHT GARRISONED
      Model                = UBPalace_ENG
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
        
    ; night snow
    ConditionState         = SNOW NIGHT
      Model                = UBPalace_NS
      Animation            = UBPalace_NS.UBPalace_NS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED SNOW NIGHT
      Model                = UBPalace_DNS
      Animation            = UBPalace_DNS.UBPalace_DNS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model                = UBPalace_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED SNOW NIGHT
      Model                = UBPalace_GNS
      Animation            = UBPalace_GNS.UBPalace_GNS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED GARRISONED SNOW NIGHT
      Model                = UBPalace_DGNS
      Animation            = UBPalace_DGNS.UBPalace_DGNS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW NIGHT
      Model                = UBPalace_ENSG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ConditionState         = USER_1 SNOW NIGHT
      Model                = UBPalace_NS
      Animation            = UBPalace_NS.UBPalace_NS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1 SNOW NIGHT
      Model                = UBPalace_DNS
      Animation            = UBPalace_DNS.UBPalace_DNS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW NIGHT
      Model                = UBPalace_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ConditionState         = USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalace_GNS
      Animation            = UBPalace_GNS.UBPalace_GNS
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = DAMAGED USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalace_DGNS
      Animation            = UBPalace_DGNS.UBPalace_DGNS
      AnimationMode        = LOOP
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalace_ENSG
      HideSubObject        = BWRSM_LT BWRSM_LT01 BWRSM_LT02 BWRSM_LT03
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
        
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPalace
      Animation          = UBPalace.UBPalace
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPalace_D
      Animation          = UBPalace_D.UBPalace_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPalace_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPalace_N
      Animation          = UBPalace_N.UBPalace_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPalace_DN
      Animation          = UBPalace_DN.UBPalace_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPalace_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPalace_S
      Animation          = UBPalace_S.UBPalace_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPalace_DS
      Animation          = UBPalace_DS.UBPalace_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPalace_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPalace_NS
      Animation          = UBPalace_NS.UBPalace_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPalace_DNS
      Animation          = UBPalace_DNS.UBPalace_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPalace_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED USER_1
    AliasConditionState  = SOLD USER_1
    AliasConditionState  = SOLD DAMAGED USER_1
    AliasConditionState  = SOLD REALLYDAMAGED USER_1
    AliasConditionState  = SOLD NIGHT USER_1
    AliasConditionState  = SOLD NIGHT DAMAGED USER_1
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = SOLD SNOW USER_1
    AliasConditionState  = SOLD SNOW DAMAGED USER_1
    AliasConditionState  = SOLD SNOW REALLYDAMAGED USER_1
    AliasConditionState  = SOLD NIGHT SNOW USER_1
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD USER_1
    AliasConditionState  = GARRISONED SOLD DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD SNOW USER_1
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED USER_1
    ;**************************************************************************************************************************

  End
  PlacementViewAngle = -45

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  ; ------------ mod's fixed fortified upgrade model -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  = GARRISONED
    AliasConditionState  = GARRISONED DAMAGED
    AliasConditionState  = GARRISONED REALLYDAMAGED RUBBLE
    AliasConditionState  = GARRISONED SNOW
    AliasConditionState  = GARRISONED SNOW DAMAGED
    AliasConditionState  = GARRISONED SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBPalaceF
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBPalaceF_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBPalaceF_E
    End
    ConditionState      = GARRISONED USER_1
      Model             = UBPalaceF_G
    End
    ConditionState      = GARRISONED USER_1 DAMAGED
      Model             = UBPalaceF_DG
    End
    ConditionState      = GARRISONED USER_1 REALLYDAMAGED RUBBLE
      Model             = UBPalaceF_EG
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBPalaceF_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBPalaceF_DS
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBPalaceF_ES
    End
    ConditionState      = GARRISONED USER_1 SNOW
      Model             = UBPalaceF_SG
    End
    ConditionState      = GARRISONED USER_1 DAMAGED SNOW
      Model             = UBPalaceF_DSG
    End
    ConditionState      = GARRISONED USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBPalaceF_ESG
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Palace
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLAArmsDealer
  End
  BuildCost        = 2800
  BuildTime        = 45.0           ; in seconds
  EnergyProduction = 0
  VisionRange     = 300.0           ; Shroud clearing distance
  ShroudClearingRange = 300
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet = GLAPalaceCommandSet
  ExperienceValue     = 300 300 300 300  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = PalaceSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_TECHNOLOGY GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_ADVANCED_TECH
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 3000.0
    InitialHealth   = 3000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 3200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End
  
  Behavior = ProductionUpdate ModuleTag_05
    ; nothing
  End

  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_SmallStructureDebris
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = GarrisonContain ModuleTag_10
    ContainMax                    = 5
    EnterSound                    = GarrisonEnter
    ExitSound                     = GarrisonExit
    ImmuneToClearBuildingAttacks  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior             = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHolePalace
    HoleMaxHealth = 500.0
  End
  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 43.0
  GeometryMinorRadius = 58.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHolePalace GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes

    ConditionState         = NONE
      Model                = UBPalace_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Flame01 FireBurningBarricade01
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED

    ConditionState         = SNOW
      Model                = UBPalace_RS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Flame01 FireBurningBarricade01
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED SNOW

    ConditionState         = GARRISONED
      Model                = UBPalaceEG_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Flame01 FireBurningBarricade01
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED

    ConditionState         = GARRISONED SNOW
      Model                = UBPalaceEG_RS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Flame01 FireBurningBarricade01
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED SNOW

  End

End

;------------------------------------------------------------------------------
Object GLASupplyStash

  ; *** ART Parameters ***
  SelectPortrait         = SUSupplyCenter_L
  ButtonImage            = SUSupplyCenter
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState         = NONE
      Model                = UBSupply
      Animation            = UBSupply.UBSupply
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED
      Model                = UBSupply_D
      Animation            = UBSupply_D.UBSupply_D
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBSupply_E
      Animation            = UBSupply_E.UBSupply_E
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    
    ; SNOW
    ConditionState         = SNOW
      Model                = UBSupply_S
      Animation            = UBSupply_S.UBSupply_S
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED SNOW
      Model                = UBSupply_DS
      Animation            = UBSupply_DS.UBSupply_DS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW
      Model                = UBSupply_ES
      Animation            = UBSupply_ES.UBSupply_ES
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End

    ; night
    ConditionState         = NIGHT
      Model                = UBSupply_N
      Animation            = UBSupply_N.UBSupply_N
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED NIGHT
      Model                = UBSupply_DN
      Animation            = UBSupply_DN.UBSupply_DN
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE NIGHT
      Model                = UBSupply_EN
      Animation            = UBSupply_EN.UBSupply_EN
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
     
    ; night snow
    ConditionState         = NIGHT SNOW
      Model                = UBSupply_NS
      Animation            = UBSupply_NS.UBSupply_NS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED NIGHT SNOW
      Model                = UBSupply_DNS
      Animation            = UBSupply_DNS.UBSupply_DNS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model                = UBSupply_ENS
      Animation            = UBSupply_ENS.UBSupply_ENS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End


        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBSupply
      Animation          = UBSupply.UBSupply
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBSupply_D
      Animation          = UBSupply_D.UBSupply_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBSupply_E
      ;Animation          = UBSupply_E.UBSupply_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBSupply_N
      Animation          = UBSupply_N.UBSupply_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBSupply_DN
      Animation          = UBSupply_DN.UBSupply_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBSupply_EN
      ;Animation          = UBSupply_EN.UBSupply_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBSupply_S
      Animation          = UBSupply_S.UBSupply_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBSupply_DS
      Animation          = UBSupply_DS.UBSupply_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBSupply_ES
      ;Animation          = UBSupply_ES.UBSupply_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBSupply_NS
      Animation          = UBSupply_NS.UBSupply_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBSupply_DNS
      Animation          = UBSupply_DNS.UBSupply_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBSupply_ENS
      ;Animation          = UBSupply_ENS.UBSupply_ENS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  End

   ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST

    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fixed fortified upgrade model -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBSpplyF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBSpplyF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBSpplyF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBSpplyF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBSpplyF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBSpplyF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SupplyStash
  Side                = GLA
  EditorSorting       = STRUCTURE
  BuildCost           = 1800
  RefundValue         = 800 ; With nothing (or zero) listed, we sell for half price. 
  BuildTime           = 10.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = GLASupplyStashCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyCenterGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CASH_GENERATOR CAPTURABLE AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE CANNOT_BUILD_NEAR_SUPPLIES FS_SUPPLY_CENTER IGNORE_DOCKING_BONES
  Body                = StructureBody ModuleTag_04
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = SupplyCenterCreate ModuleTag_05
    ;nothing
  End

  Behavior             = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHoleSupplyStash
    HoleMaxHealth = 500.0
  End 
  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior                 = CreateObjectDie ModuleTag_08
    CreationList      = OCL_SmallStructureDebris
  End
  Behavior                 = FXListDie ModuleTag_09
    DeathFX           = FX_StructureSmallDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
  Behavior = SupplyCenterProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 36.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior            = SpawnBehavior ModuleTag_12
    SpawnNumber       = 1
    SpawnReplaceDelay = 9999
    SpawnTemplateName = GLAInfantryWorker
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End

  Behavior = SupplyCenterDockUpdate ModuleTag_13
    AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
    NumberApproachPositions = -1 ; This is a Boneless dock, so this means infinite can approach
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  ;Dont forget to edit the GLA Hole geometry for this object too
  Geometry            = BOX
  GeometryMajorRadius = 36.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  ;FactoryExtraBibWidth= 1.0     ; extra placement border.
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleSupplyStash GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes

    ConditionState         = NONE
      Model                = UBSupply_R
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
      ParticleSysBone      = Smoke06 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED RUBBLE

    ConditionState         = SNOW
      Model                = UBSupply_RS
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
      ParticleSysBone      = Smoke06 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED RUBBLE SNOW

    ConditionState         = GARRISONED
      Model                = UBSpplyEG_R
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
      ParticleSysBone      = Smoke06 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED RUBBLE

    ConditionState         = GARRISONED SNOW
      Model                = UBSpplyEG_R
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
      ParticleSysBone      = Smoke06 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED RUBBLE SNOW

  End

End

;------------------------------------------------------------------------------
Object FakeGLASupplyStash

  ; *** ART Parameters ***
  SelectPortrait         = SUSupplyCenter_L
  ButtonImage            = SUSupplyCenter
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState         = NONE
      Model                = UBSupply
      Animation            = UBSupply.UBSupply
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED
      Model                = UBSupply_D
      Animation            = UBSupply_D.UBSupply_D
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBSupply_E
      Animation            = UBSupply_E.UBSupply_E
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    
    ; SNOW
    ConditionState         = SNOW
      Model                = UBSupply_S
      Animation            = UBSupply_S.UBSupply_S
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED SNOW
      Model                = UBSupply_DS
      Animation            = UBSupply_DS.UBSupply_DS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW
      Model                = UBSupply_ES
      Animation            = UBSupply_ES.UBSupply_ES
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End

    ; night
    ConditionState         = NIGHT
      Model                = UBSupply_N
      Animation            = UBSupply_N.UBSupply_N
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED NIGHT
      Model                = UBSupply_DN
      Animation            = UBSupply_DN.UBSupply_DN
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE NIGHT
      Model                = UBSupply_EN
      Animation            = UBSupply_EN.UBSupply_EN
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
     
    ; night snow
    ConditionState         = NIGHT SNOW
      Model                = UBSupply_NS
      Animation            = UBSupply_NS.UBSupply_NS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = DAMAGED NIGHT SNOW
      Model                = UBSupply_DNS
      Animation            = UBSupply_DNS.UBSupply_DNS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model                = UBSupply_ENS
      Animation            = UBSupply_ENS.UBSupply_ENS
      AnimationMode        = LOOP
      ParticleSysBone      = Smoke01 SteamVent
    End


        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBSupply
      Animation          = UBSupply.UBSupply
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBSupply_D
      Animation          = UBSupply_D.UBSupply_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBSupply_E
      ;Animation          = UBSupply_E.UBSupply_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBSupply_N
      Animation          = UBSupply_N.UBSupply_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBSupply_DN
      Animation          = UBSupply_DN.UBSupply_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBSupply_EN
      ;Animation          = UBSupply_EN.UBSupply_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBSupply_S
      Animation          = UBSupply_S.UBSupply_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBSupply_DS
      Animation          = UBSupply_DS.UBSupply_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBSupply_ES
      ;Animation          = UBSupply_ES.UBSupply_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBSupply_NS
      Animation          = UBSupply_NS.UBSupply_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBSupply_DNS
      Animation          = UBSupply_DNS.UBSupply_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBSupply_ENS
      ;Animation          = UBSupply_ENS.UBSupply_ENS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  End

   ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST

    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fixed fortified upgrade model -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBSpplyF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBSpplyF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBSpplyF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBSpplyF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBSpplyF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBSpplyF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SupplyStash
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    ;Object = GLACommandCenter
  End
  BuildCost           = 450
  BuildTime           = 5.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLASupplyStashCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FAKE

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 500.0
    InitialHealth     = 500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 570
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_SmallStructureDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLASupplyStash
    TriggeredBy = Upgrade_BecomeRealGLASupplyStash
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  ;Dont forget to edit the GLA Hole geometry for this object too
  Geometry            = BOX
  GeometryMajorRadius = 36.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  ;FactoryExtraBibWidth = 1.0     ; extra placement border.
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 105
  ShadowSizeY = 105
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;GLA Barracks
Object GLABarracks

  ; *** ART Parameters ***
  SelectPortrait         = SUBarracks_L
  ButtonImage            = SUBarracks
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBBARRACKS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks.UBBarracks
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBBarracks_D
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_D.UBBarracks_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBBarracks_E
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_E.UBBarracks_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBBarrksEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG.UBBarrksEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBarrksEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_D.UBBarrksEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBarrksEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_E.UBBarrksEG_E
      AnimationMode        = LOOP
    End
        
        ; day
    ConditionState = SNOW
      Model = UBBARRACKS_S
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_S.UBBarracks_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBBarracks_DS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_DS.UBBarracks_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBBarracks_ES
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_ES.UBBarracks_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBarrksEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_S.UBBarrksEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DS.UBBarrksEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ES.UBBarrksEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBBARRACKS_N
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_N.UBBarracks_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBBarracks_DN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DN.UBBarracks_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBBarracks_EN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_EN.UBBarracks_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBarrksEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_N.UBBarrksEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DN.UBBarrksEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_EN.UBBarrksEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBBARRACKS_NS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_NS.UBBarracks_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBBarracks_DNS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBBarracks_ENS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_NS.UBBarrksEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DNS.UBBarrksEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ENS.UBBarrksEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBarracks
      Animation          = UBBarracks.UBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBarracks_D
      Animation          = UBBarracks_D.UBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBarracks_E
      Animation          = UBBarracks_E.UBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBarracks_N
      Animation          = UBBarracks_N.UBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBarracks_DN
      Animation          = UBBarracks_DN.UBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBarracks_EN
      Animation          = UBBarracks_EN.UBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBarracks_S
      Animation          = UBBarracks_S.UBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBarracks_DS
      Animation          = UBBarracks_DS.UBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBarracks_ES
      Animation          = UBBarracks_ES.UBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBarracks_NS
      Animation          = UBBarracks_NS.UBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBarracks_DNS
      Animation          = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBarracks_ENS
      Animation          = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Barracks
  Side             = GLA
  EditorSorting    = STRUCTURE
  BuildCost        = 800
  BuildTime        = 10.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = GLABarracksCommandSet
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = GLAUpgradedStructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  Prerequisites
;    Object = GLASupplyStash
  End


  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE HEAL_PAD CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE FS_BARRACKS
  Body            = StructureBody ModuleTag_04
    MaxHealth     = 1000.0
    InitialHealth = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = HealContain ModuleTag_05
    ContainMax          = 10 ;way bigger than the # of objects we can have  
    TimeForFullHeal     = 2000   ;(in milliseconds)
    AllowInsideKindOf   = INFANTRY
    AllowAlliesInside   = Yes
    AllowNeutralInside  = No
    AllowEnemiesInside  = No
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHoleBarracks
    HoleMaxHealth = 500.0
  End
  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior        = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior        = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 42.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR SMALL MEDIUM FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End


  Geometry            = BOX
  GeometryMajorRadius = 42.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleBarracks GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes

    ConditionState         = NONE
      Model                = UBBarracks_R
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED

    ConditionState         = SNOW
      Model                = UBBarracks_RS
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED SNOW

    ConditionState         = GARRISONED
      Model                = UBBarrksEG_R
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED

    ConditionState         = GARRISONED SNOW
      Model                = UBBarrksEG_RS
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED SNOW

  End

End

;------------------------------------------------------------------------------
;Fake GLA Barracks
Object FakeGLABarracks

  ; *** ART Parameters ***
  SelectPortrait         = SUBarracks_L
  ButtonImage            = SUBarracks
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBBARRACKS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks.UBBarracks
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBBarracks_D
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_D.UBBarracks_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBBarracks_E
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_E.UBBarracks_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBBarrksEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG.UBBarrksEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBarrksEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_D.UBBarrksEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBarrksEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_E.UBBarrksEG_E
      AnimationMode        = LOOP
    End
        
        ; day
    ConditionState = SNOW
      Model = UBBARRACKS_S
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_S.UBBarracks_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBBarracks_DS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_DS.UBBarracks_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBBarracks_ES
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_ES.UBBarracks_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBarrksEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_S.UBBarrksEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DS.UBBarrksEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ES.UBBarrksEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBBARRACKS_N
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_N.UBBarracks_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBBarracks_DN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DN.UBBarracks_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBBarracks_EN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_EN.UBBarracks_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBarrksEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_N.UBBarrksEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DN.UBBarrksEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_EN.UBBarrksEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBBARRACKS_NS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_NS.UBBarracks_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBBarracks_DNS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBBarracks_ENS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_NS.UBBarrksEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DNS.UBBarrksEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ENS.UBBarrksEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBarracks
      Animation          = UBBarracks.UBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBarracks_D
      Animation          = UBBarracks_D.UBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBarracks_E
      Animation          = UBBarracks_E.UBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBarracks_N
      Animation          = UBBarracks_N.UBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBarracks_DN
      Animation          = UBBarracks_DN.UBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBarracks_EN
      Animation          = UBBarracks_EN.UBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBarracks_S
      Animation          = UBBarracks_S.UBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBarracks_DS
      Animation          = UBBarracks_DS.UBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBarracks_ES
      Animation          = UBBarracks_ES.UBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBarracks_NS
      Animation          = UBBarracks_NS.UBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBarracks_DNS
      Animation          = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBarracks_ENS
      Animation          = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Barracks
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    ;Object = GLACommandCenter
  End
  BuildCost           = 200
  BuildTime           = 5.0            ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLABarracksCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 25 25 25 25  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FAKE

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 125.0
    InitialHealth     = 125.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 325
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLABarracks
    TriggeredBy = Upgrade_BecomeRealGLABarracks
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL MEDIUM FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 42.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 120
  ShadowSizeY = 110
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;GLA Arms Dealer
Object GLAArmsDealer

  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  ; ----------------- Main Building -------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState       = NONE
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED
      Model           = UBArmDeal_D
      Animation       = UBArmDeal_D.UBArmDeal_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_E
      Animation       = UBArmDeal_E.UBArmDeal_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED
      Model                = UBArmDlEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG.UBArmDlEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBArmDlEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_D.UBArmDlEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBArmDlEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_E.UBArmDlEG_E
      AnimationMode        = LOOP
    End

    ; snow
    ConditionState       = SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED SNOW
      Model           = UBArmDeal_DS
      Animation       = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBArmDeal_ES
      Animation       = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED SNOW
      Model                = UBArmDlEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_S.UBArmDlEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DS.UBArmDlEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ES.UBArmDlEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBArmDeal_N
      Animation       = UBArmDeal_N.UBArmDeal_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBArmDeal_DN
      Animation       = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBArmDeal_EN
      Animation       = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBArmDlEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_N.UBArmDlEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DN.UBArmDlEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_EN.UBArmDlEG_EN
      AnimationMode        = LOOP
    End
     
     ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBArmDeal_NS
      Animation       = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBArmDeal_DNS
      Animation       = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBArmDeal_ENS
      Animation       = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_NS.UBArmDlEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DNS.UBArmDlEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ENS.UBArmDlEG_ENS
      AnimationMode        = LOOP
    End
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_D
      Animation          = UBArmDeal_D.UBArmDeal_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_E
      Animation          = UBArmDeal_E.UBArmDeal_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBArmDeal_N
      Animation          = UBArmDeal_N.UBArmDeal_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBArmDeal_DN
      Animation          = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBArmDeal_EN
      Animation          = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBArmDeal_DS
      Animation          = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBArmDeal_ES
      Animation          = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBArmDeal_NS
      Animation          = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBArmDeal_DNS
      Animation          = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBArmDeal_ENS
      Animation          = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
 
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBArmDeal_A4SN
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- the door -----------------------
  Draw = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_OPENING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_CLOSING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
       
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************  
       
       
  End
  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ArmsDealer
  Side             = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLASupplyStash
  End
  BuildCost        = 2500
  BuildTime        = 15.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = GLAArmsDealerCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions          = None
    Armor               = StructureArmor
    DamageFX            = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD CAPTURABLE FS_TECHNOLOGY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FACTORY FS_WARFACTORY
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior               = RebuildHoleExposeDie ModuleTag_06
    HoleName        = GLAHoleArmsDealer
    HoleMaxHealth   = 500.0
  End 
  Behavior             = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X: -20.0  Y:-15.0   Z:0.0
    NaturalRallyPoint = X: 40.0  Y:-15.0   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RepairDockUpdate ModuleTag_12
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 62.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleArmsDealer GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes

    ConditionState         = NONE
      Model                = UBArmDeal_R
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED

    ConditionState         = SNOW
      Model                = UBArmDeal_RS
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
    End
    AliasConditionState    = DAMAGED REALLYDAMAGED SNOW

    ConditionState         = GARRISONED
      Model                = UBArmDlEG_R
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED

    ConditionState         = GARRISONED SNOW
      Model                = UBArmDlEG_RS
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
    End
    AliasConditionState    = GARRISONED DAMAGED REALLYDAMAGED SNOW

  End

End

;------------------------------------------------------------------------------
;GLA Arms Dealer
Object FakeGLAArmsDealer

  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  ; ----------------- Main Building -------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState       = NONE
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED
      Model           = UBArmDeal_D
      Animation       = UBArmDeal_D.UBArmDeal_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_E
      Animation       = UBArmDeal_E.UBArmDeal_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED
      Model                = UBArmDlEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG.UBArmDlEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBArmDlEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_D.UBArmDlEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBArmDlEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_E.UBArmDlEG_E
      AnimationMode        = LOOP
    End

    ; snow
    ConditionState       = SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED SNOW
      Model           = UBArmDeal_DS
      Animation       = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBArmDeal_ES
      Animation       = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED SNOW
      Model                = UBArmDlEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_S.UBArmDlEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DS.UBArmDlEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ES.UBArmDlEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBArmDeal_N
      Animation       = UBArmDeal_N.UBArmDeal_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBArmDeal_DN
      Animation       = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBArmDeal_EN
      Animation       = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBArmDlEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_N.UBArmDlEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DN.UBArmDlEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_EN.UBArmDlEG_EN
      AnimationMode        = LOOP
    End
     
     ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBArmDeal_NS
      Animation       = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBArmDeal_DNS
      Animation       = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBArmDeal_ENS
      Animation       = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_NS.UBArmDlEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DNS.UBArmDlEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ENS.UBArmDlEG_ENS
      AnimationMode        = LOOP
    End
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_D
      Animation          = UBArmDeal_D.UBArmDeal_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_E
      Animation          = UBArmDeal_E.UBArmDeal_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBArmDeal_N
      Animation          = UBArmDeal_N.UBArmDeal_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBArmDeal_DN
      Animation          = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBArmDeal_EN
      Animation          = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBArmDeal_DS
      Animation          = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBArmDeal_ES
      Animation          = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBArmDeal_NS
      Animation          = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBArmDeal_DNS
      Animation          = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBArmDeal_ENS
      Animation          = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
 
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBArmDeal_A4SN
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- the door -----------------------
  Draw = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_OPENING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_CLOSING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
       
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************  
       
       
  End
  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ArmsDealer
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = GLASupplyStash
  End
  BuildCost           = 625
  BuildTime           = 7.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLAArmsDealerCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FAKE

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 500.0
    InitialHealth     = 500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 700
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End
  
  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLAArmsDealer
    TriggeredBy = Upgrade_BecomeRealGLAArmsDealer
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 62.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 127
  ShadowSizeY = 144
  BuildCompletion     = PLACED_BY_PLAYER

End

; -----------------------------------------------------------------------------
Object GLASneakAttackTunnelNetworkStart

  ; *** ART Parameters ***
  SelectPortrait         = SUSneakAttack_L
  ButtonImage            = SUSneakAttack

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;***NONE
    ConditionState      = NONE
      Model             = UBSnkAtk_A1
      Animation         = UBSnkAtk_A1.UBSnkAtk_A1
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackCrackDust
      ;ParticleSysBone   = DIRT SneakAttackDirt       ;SteveM commented out 8.4.03
      ParticleSysBone   = DIRT SneakAttackCrackDust1
      ParticleSysBone   = DIRT SneakAttackDebris
      ParticleSysBone   = DIRT SneakAttackDebris0
      ParticleSysBone   = DIRT SneakAttackDebris1
      ParticleSysBone   = DIRT SneakAttackCrackDust0
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = DAMAGED
      Model             = UBSnkAtk_A1D
      Animation         = UBSnkAtk_A1D.UBSnkAtk_A1D
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackDirt
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = REALLYDAMAGED
      Model             = UBSnkAtk_A1E
      Animation         = UBSnkAtk_A1E.UBSnkAtk_A1E
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState      = RUBBLE
      Model             = UBSnkAtk_R
    End

    ;***SNOW
    ConditionState      = SNOW
      Model             = UBSnkAtk_A1S
      Animation         = UBSnkAtk_A1S.UBSnkAtk_A1S
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackCrackDustSnow
      ;ParticleSysBone   = DIRT SneakAttackDirtSnow       ;SteveM commented out 8.4.03
      ParticleSysBone   = DIRT SneakAttackCrackDust1Snow
      ParticleSysBone   = DIRT SneakAttackDebrisSnow
      ParticleSysBone   = DIRT SneakAttackDebris0Snow
      ParticleSysBone   = DIRT SneakAttackDebris1Snow
      ParticleSysBone   = DIRT SneakAttackCrackDust0Snow
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = DAMAGED SNOW
      Model             = UBSnkAtk_A1DS
      Animation         = UBSnkAtk_A1DS.UBSnkAtk_A1DS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackDirtSnow
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = REALLYDAMAGED SNOW
      Model             = UBSnkAtk_A1ES
      Animation         = UBSnkAtk_A1ES.UBSnkAtk_A1ES
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState      = RUBBLE SNOW
      Model             = UBSnkAtk_RS
    End

    ;***NIGHT
    ConditionState      = NIGHT
      Model             = UBSnkAtk_A1
      Animation         = UBSnkAtk_A1.UBSnkAtk_A1
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackCrackDust
      ;ParticleSysBone   = DIRT SneakAttackDirt       ;SteveM commented out 8.4.03
      ParticleSysBone   = DIRT SneakAttackCrackDust1
      ParticleSysBone   = DIRT SneakAttackDebris
      ParticleSysBone   = DIRT SneakAttackDebris0
      ParticleSysBone   = DIRT SneakAttackDebris1
      ParticleSysBone   = DIRT SneakAttackCrackDust0
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = DAMAGED NIGHT
      Model             = UBSnkAtk_A1D
      Animation         = UBSnkAtk_A1D.UBSnkAtk_A1D
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackDirt
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = REALLYDAMAGED NIGHT
      Model             = UBSnkAtk_A1E
      Animation         = UBSnkAtk_A1E.UBSnkAtk_A1E
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState      = RUBBLE NIGHT
      Model             = UBSnkAtk_R
    End

    ;***SNOW NIGHT
    ConditionState      = SNOW NIGHT
      Model             = UBSnkAtk_A1S
      Animation         = UBSnkAtk_A1S.UBSnkAtk_A1S
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackCrackDustSnow
      ;ParticleSysBone   = DIRT SneakAttackDirtSnow       ;SteveM commented out 8.4.03
      ParticleSysBone   = DIRT SneakAttackCrackDust1Snow
      ParticleSysBone   = DIRT SneakAttackDebrisSnow
      ParticleSysBone   = DIRT SneakAttackDebris0Snow
      ParticleSysBone   = DIRT SneakAttackDebris1Snow
      ParticleSysBone   = DIRT SneakAttackCrackDust0Snow
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBSnkAtk_A1DS
      Animation         = UBSnkAtk_A1DS.UBSnkAtk_A1DS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES

      ParticleSysBone   = DIRT SneakAttackDirtSnow
      ParticleSysBone   = DIRT SneakAttackSteamVent
    End

    ConditionState      = REALLYDAMAGED SNOW NIGHT
      Model             = UBSnkAtk_A1ES
      Animation         = UBSnkAtk_A1ES.UBSnkAtk_A1ES
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState      = RUBBLE SNOW NIGHT
      Model             = UBSnkAtk_RS
    End

  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = SCIENCE:GLASneakAttack
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
   ;None
  End
  EnergyProduction = 0
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  
  ArmorSet        
    Conditions      = None
    Armor           = TunnelNetworkArmor
    DamageFX        = DamageFX_Empty
  End
  
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE FS_BASE_DEFENSE SCORE_CREATE PORTABLE_STRUCTURE ;STRUCTURE 
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DestroyDie ModuleTag_10
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_CreateSneakAttackTunnel
    TransferPreviousHealth = Yes
  End

  Behavior = FlammableUpdate ModuleTag_15

    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = LifetimeUpdate ModuleTag_16
    MinLifetime = 5000   ; min lifetime in msec
    MaxLifetime = 5000   ; max lifetime in msec
  End

  Behavior = FireWeaponUpdate ModuleTag_17
    Weapon = SneakAttackShockwaveWeaponSmall
    InitialDelay = 10;
  End

  Behavior = FireWeaponUpdate ModuleTag_18
    Weapon = SneakAttackShockwaveWeaponBig
    InitialDelay = 1000;
  End

  Behavior = FireWeaponUpdate ModuleTag_19
    Weapon = SneakAttackShockwaveWeaponBig
    InitialDelay = 2500;
  End


  ; IMPORTANT: DO NOT GIVE THIS OBJECT ANY EXTENTS -ML

  Geometry             = CYLINDER
  GeometryMajorRadius  = 25.0
  GeometryHeight       = 20.0
  GeometryIsSmall      = No
  FactoryExtraBibWidth = 25.0
  Shadow               = SHADOW_VOLUME
  BuildCompletion      = PLACED_BY_PLAYER

End

; -----------------------------------------------------------------------------
Object GLASneakAttackTunnelNetwork

  ; *** ART Parameters ***
  SelectPortrait         = SUSneakAttack_L
  ButtonImage            = SUSneakAttack

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;***DEFAULT
    ConditionState      = NONE
      Model             = UBSnkAtk
    End
    ConditionState      = DAMAGED
      Model             = UBSnkAtk_D
    End
    ConditionState      = REALLYDAMAGED
      Model             = UBSnkAtk_E
      ;ParticleSysBone   = Mound SteamVent
    End
    ConditionState      = RUBBLE
      Model             = UBSnkAtk_R
      ;ParticleSysBone   = Mound SteamVent
    End

    ;***SNOW
    ConditionState      = SNOW
      Model             = UBSnkAtk_S
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBSnkAtk_DS
    End
    ConditionState      = REALLYDAMAGED SNOW
      Model             = UBSnkAtk_ES
      ;ParticleSysBone   = Mound SteamVent
    End
    ConditionState      = RUBBLE SNOW
      Model             = UBSnkAtk_RS
      ;ParticleSysBone   = Mound SteamVent
    End

    ;***NIGHT
    ConditionState      = NIGHT
      Model             = UBSnkAtk_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBSnkAtk_DN
    End
    ConditionState      = REALLYDAMAGED NIGHT
      Model             = UBSnkAtk_EN
      ;ParticleSysBone   = Mound SteamVent
    End
    ConditionState      = RUBBLE NIGHT
      Model             = UBSnkAtk_R
      ;ParticleSysBone   = Mound SteamVent
    End

    ;***SNOW NIGHT
    ConditionState      = SNOW NIGHT
      Model             = UBSnkAtk_NS
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBSnkAtk_DNS
    End
    ConditionState      = REALLYDAMAGED SNOW NIGHT
      Model             = UBSnkAtk_ENS
      ;ParticleSysBone   = Mound SteamVent
    End
    ConditionState      = RUBBLE SNOW NIGHT
      Model             = UBSnkAtk_RS
      ;ParticleSysBone   = Mound SteamVent
    End

  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = SCIENCE:GLASneakAttack
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
   ;None
  End
  EnergyProduction = 0
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TunnelNetworkGunDUMMY ;So AI can attack from it in guard mode.
  End
  ArmorSet
    Conditions      = None
    Armor           = TunnelNetworkArmor
    DamageFX        = StructureDamageFXNoShake
  End
  CommandSet       = GLASneakAttackTunnelCommandSet
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAN_ATTACK FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SCORE_DESTROY AUTO_RALLYPOINT
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  ;it's a sneak attack, not a tunnel network
  ;Behavior = StealthDetectorUpdate ModuleTag_13
  ;  DetectionRate     = 500   ; how often to rescan for stealthed things in my sight (msec)
  ;  DetectionRange   = 150   ;Dustin, enable this for independant balancing!
  ;  CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
  ;  CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  ;End

  Behavior = TunnelContain ModuleTag_05
    TimeForFullHeal     = 5000   ;(in milliseconds)
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ;ATTACK_BUILDINGS     ;it's a sneak attack, not a tunnel network
  End

  ;Kris: Removed this module because units exiting the container would extract information from
  ;the wrong exit interface. Because TunnelContain has the proper information for exiting properly
  ;we don't need this one. Plus sneak attack tunnels don't produce units anyway.
  ;Behavior = DefaultProductionExitUpdate ModuleTag_06
  ;  UnitCreatePoint   = X:  5.0  Y:  0.0   Z:0.0
  ;  NaturalRallyPoint = X: 35.0  Y:  0.0   Z:0.0
  ;End

  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL
    SinkDelay = 1500
    SinkRate = 2     ; in Dist/Sec
    DestructionDelay = 8000
    FX = INITIAL FX_StructureSmallDeath
    OCL = INITIAL OCL_ABTunnelNetworkDebris
  End

  ;Behavior = DestroyDie ModuleTag_10
  ;  ;nothing
  ;End
  ;Behavior             = CreateObjectDie ModuleTag_11
  ;  CreationList  = OCL_ABTunnelNetworkDebris
  ;End
  ;Behavior             = FXListDie ModuleTag_12
  ;  DeathFX       = FX_StructureSmallDeath
  ;End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End


  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry             = CYLINDER
  GeometryMajorRadius  = 25.0
  GeometryHeight       = 20.0
  GeometryIsSmall      = No
  FactoryExtraBibWidth = 25.0
  Shadow               = SHADOW_VOLUME
  BuildCompletion      = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;GLA Tunnel Network copy, without the spawn module
Object GLATunnelNetworkNoSpawn

  ; *** ART Parameters ***
  SelectPortrait         = SUTunnel_L
  ButtonImage            = SUTunnel

  UpgradeCameo1           = Upgrade_GLAAPBullets
  UpgradeCameo2           = Upgrade_GLAFortifiedStructure
  UpgradeCameo3           = Upgrade_GLACamoNetting
  ;UpgradeCameo4           = NONE
  ;UpgradeCameo5           = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model             = UBUndTunn
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState      = DAMAGED
      Model             = UBUndTunn_D
    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBUndTunn_E
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW
      Model             = UBUndTunn_S
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBUndTunn_DS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunn_ES
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    
    
    ConditionState      = NIGHT
      Model             = UBUndTunn_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBUndTunn_DN
    End
    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBUndTunn_EN
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW NIGHT
      Model             = UBUndTunn_NS
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBUndTunn_DNS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBUndTunn_ENS
      ParticleSysBone   = Steam01 SteamVent
    End
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBUndTunn
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBUndTunn_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBUndTunn_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBUndTunn_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBUndTunn_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBUndTunn_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBUndTunn_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBUndTunn_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBUndTunn_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBUndTunn_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBUndTunn_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBUndTunn_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    =  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBUndTunF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBUndTunF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBUndTunF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBUndTunF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBUndTunF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLABarracks
  End
  BuildCost        = 800
  RefundValue      = 100 ; With nothing (or zero) listed, we sell for half price. 
  BuildTime        = 15.0           ; in seconds
  EnergyProduction = 0
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = TunnelNetworkArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = TunnelNetworkArmorUpgraded
    DamageFX          = StructureDamageFXNoShake
  End
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TunnelNetworkGun
  End

  CommandSet       = GLATunnelNetworkCommandSet
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    TurretMoveLoop        = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SCORE_CREATE AUTO_RALLYPOINT SALVAGER
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthDetectorUpdate ModuleTag_13
    DetectionRate     = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange   = 150   ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = AIUpdateInterface ModuleTag_16
    Turret
      TurretTurnRate        = 180   ;turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End

    AutoAcquireEnemiesWhenIdle = Yes Stealthed; defensive weapon
  End

  Behavior = TunnelContain ModuleTag_05
    TimeForFullHeal     = 5000   ;(in milliseconds)
  End

  ;Kris: Removed this module from because units exiting the container would extract information 
  ;from the wrong exit interface. And we don't appear to need it for the spawns because they
  ;use OpenContain instead.
  ;Behavior = DefaultProductionExitUpdate ModuleTag_06
  ;  UnitCreatePoint   = X:  5.0  Y:  0.0   Z:0.0
  ;  NaturalRallyPoint = X: 35.0  Y:  0.0   Z:0.0
  ;End

; The lack of these two modules is what makes this Single player version different from the normal one
;  Behavior            = SpawnBehavior ModuleTag_07
;    SpawnNumber       = 2
;    SpawnReplaceDelay = 9999
;    SpawnTemplateName = GLAInfantryTunnelDefender
;    OneShot           = Yes
;    CanReclaimOrphans = No
;    SlavesHaveFreeWill = Yes
;  End
  Behavior             = RebuildHoleExposeDie ModuleTag_09
    HoleName      = GLAHoleTunnelNetworkNoSpawn
    HoleMaxHealth = 500.0
  End
  Behavior = DestroyDie ModuleTag_10
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABTunnelNetworkDebris
  End
  Behavior             = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = StealthUpdate ModuleTag_17
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_18
    TriggeredBy = Upgrade_GLACamoNetting
  End
  Behavior = ProductionUpdate ModuleTag_19
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHoleTunnelNetworkNoSpawn GLAHole_BaseDefense ;GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBUndTunn_R
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBUndTunn_R
    End
  End
End

;---------------------------------------------------------------------
Object GLAStingerSiteNoHole

  ; *** ART Parameters ***
  SelectPortrait         = SUStinger_L
  ButtonImage            = SUStinger

  UpgradeCameo1          = Upgrade_GLAAPRockets
  UpgradeCameo2          = Upgrade_GLAFortifiedStructure
  UpgradeCameo3          = Upgrade_GLACamoNetting
  ;UpgradeCameo4          = NONE
  ;UpgradeCameo5          = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
    End
    
    ConditionState = DAMAGED
      Model = UBStingerS_D
    End
    
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
    End

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
    End
    
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
    End
    
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
    End
    
    ; night  **********************************
    ConditionState       = NIGHT 
      Model              = UBStingerS_N
    End
    
    ConditionState       = DAMAGED NIGHT 
      Model              = UBStingerS_DN
    End
    
    ConditionState       = REALLYDAMAGED NIGHT  RUBBLE
      Model              = UBStingerS_EN
    End
        
    ; night snow **********************************
    ConditionState       = NIGHT SNOW
      Model              = UBStingerS_NS
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBStingerS_DNS
    End
    
    ConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE
      Model              = UBStingerS_ENS
    End
    
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
     ; Animation          = UBStingerS.UBStingerS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
     ; Animation          = UBStingerS_D.UBStingerS_D
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
     ; Animation          = UBStingerS_E.UBStingerS_E
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBStingerS_N
     ; Animation          = UBStingerS_N.UBStingerS_N
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBStingerS_DN
     ; Animation          = UBStingerS_DN.UBStingerS_DN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBStingerS_EN
     ; Animation          = UBStingerS_EN.UBStingerS_EN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
     ; Animation          = UBStingerS_S.UBStingerS_S
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
     ; Animation          = UBStingerS_DS.UBStingerS_DS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
     ; Animation          = UBStingerS_ES.UBStingerS_ES
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBStingerS_NS
     ; Animation          = UBStingerS_NS.UBStingerS_NS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBStingerS_DNS
     ; Animation          = UBStingerS_DNS.UBStingerS_DNS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBStingerS_ENS
     ; Animation          = UBStingerS_ENS.UBStingerS_ENS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBStngrSF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBStngrSF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBStngrSF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBStngrSF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBStngrSF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBStngrSF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:StingerSite
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object            = GLABarracks
  End
  BuildCost           = 900
  BuildTime           = 15.0           ; in seconds
  EnergyProduction    = 0
  VisionRange         = 600.0           ; Shroud clearing distance
  ShroudClearingRange = 400
  ArmorSet
    Conditions        = None
    Armor             = StingerSiteArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = StingerSiteArmorUpgraded
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = GLAStingerSiteCommandSet
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SPAWNS_ARE_THE_WEAPONS SCORE

  Body                 = HiveStructureBody ModuleTag_04 ;Requires SpawnBehavior!
    MaxHealth          = 1000.0
    InitialHealth      = 1000.0
    ;**Careful with these damage types -- because area damage types will already
    ;**damage slaves.
    PropagateDamageTypesToSlavesWhenExisting = NONE +SMALL_ARMS +SNIPER +POISON +RADIATION +SURRENDER +MICROWAVE
    SwallowDamageTypesIfSlavesNotExisting = NONE +SNIPER +RADIATION +SURRENDER +MICROWAVE ;+POISON

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = SpawnPointProductionExitUpdate ModuleTag_05
    SpawnPointBoneName = SpawnPoint
  End

  Behavior                = SpawnBehavior ModuleTag_06
    SpawnNumber           = 3
    SpawnReplaceDelay     = 18000 ;30000 ;msec   ;hey, it's a base defense! make it less useless! :P
    SpawnTemplateName     = GLAInfantryStingerSoldier
    CanReclaimOrphans     = No
    SpawnedRequireSpawner = Yes
    SlavesHaveFreeWill = No
  End
  ;*** cut module ***
  ;Behavior        = RebuildHoleExposeDie ModuleTag_08
  ;  HoleName      = GLAHoleStingerSite
  ;  HoleMaxHealth = 500.0
  ;End
  Behavior        = DestroyDie ModuleTag_09
    ;<NO DATA>
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior        = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = StingerSiteDeathConcussion
    StartsActive  = Yes
  End
  Behavior = StealthUpdate ModuleTag_13
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLACamoNetting
  End
  Behavior = ProductionUpdate ModuleTag_15
  End
  Behavior                = FlammableUpdate ModuleTag_16
    AflameDuration        = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 5       ; taking this much damage...
    AflameDamageDelay     = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Geometry            = CYLINDER
  GeometryMajorRadius = 36.0
  GeometryHeight      = 9.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;******************** Gla Arms Dealer No Gla Hole *****************************
;GLA Arms Dealer No Hole
Object GLAArmsDealerNoHole

  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure
  
  ; ----------------- Main Building -------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState       = NONE
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED
      Model           = UBArmDeal_D
      Animation       = UBArmDeal_D.UBArmDeal_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_E
      Animation       = UBArmDeal_E.UBArmDeal_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED
      Model                = UBArmDlEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG.UBArmDlEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBArmDlEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_D.UBArmDlEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBArmDlEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_E.UBArmDlEG_E
      AnimationMode        = LOOP
    End
     
    ; snow
    ConditionState       = SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED SNOW
      Model           = UBArmDeal_DS
      Animation       = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBArmDeal_ES
      Animation       = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED SNOW
      Model                = UBArmDlEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_S.UBArmDlEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DS.UBArmDlEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ES.UBArmDlEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBArmDeal_N
      Animation       = UBArmDeal_N.UBArmDeal_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBArmDeal_DN
      Animation       = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBArmDeal_EN
      Animation       = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBArmDlEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_N.UBArmDlEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DN.UBArmDlEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_EN.UBArmDlEG_EN
      AnimationMode        = LOOP
    End
     
     ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBArmDeal_NS
      Animation       = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBArmDeal_DNS
      Animation       = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBArmDeal_ENS
      Animation       = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_NS.UBArmDlEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DNS.UBArmDlEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ENS.UBArmDlEG_ENS
      AnimationMode        = LOOP
    End    
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_D
      Animation          = UBArmDeal_D.UBArmDeal_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_E
      Animation          = UBArmDeal_E.UBArmDeal_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBArmDeal_N
      Animation          = UBArmDeal_N.UBArmDeal_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBArmDeal_DN
      Animation          = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBArmDeal_EN
      Animation          = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBArmDeal_DS
      Animation          = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBArmDeal_ES
      Animation          = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBArmDeal_NS
      Animation          = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBArmDeal_DNS
      Animation          = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBArmDeal_ENS
      Animation          = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
 
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBArmDeal_A4SN
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- the door -----------------------
  Draw = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_OPENING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_CLOSING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
       
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************  
       
       
  End
  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ArmsDealer
  Side             = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLASupplyStash
  End
  BuildCost        = 2500
  BuildTime        = 25.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = GLAArmsDealerCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions          = None
    Armor               = StructureArmor
    DamageFX            = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD CAPTURABLE FS_TECHNOLOGY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE FS_FACTORY FS_WARFACTORY
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  ;**module cut**
  ;Behavior               = RebuildHoleExposeDie ModuleTag_06
  ;  HoleName        = GLAHoleArmsDealer
  ;  HoleMaxHealth   = 500.0
  ;End 
  Behavior             = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X: -20.0  Y:-15.0   Z:0.0
    NaturalRallyPoint = X: 40.0  Y:-15.0   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RepairDockUpdate ModuleTag_12
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 62.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object GLAWall

  ; *** ART Parameters ***
  SelectPortrait         = SUBarricade_L
  ButtonImage            = SUBarricade
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model         = UBBurnBarrY
      ParticleSysBone        = Fire01 FireBurningBarricade02
      ParticleSysBone        = Fire02 FireBurningBarricade02
      ParticleSysBone        = Smoke01 SmokeBurningBarricade02
      ParticleSysBone        = Smoke02 SmokeBurningBarricade02
    End
    ConditionState = DAMAGED
      Model         = UBBurnBarrY_D
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBBurnBarrY_E
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BurningBarricade
  Side = GLA
  EditorSorting    = STRUCTURE

  BuildCost        = 100
  BuildTime        = 1.0           ; in seconds
  VisionRange      = 150.0           ; Shroud clearing distance
  ShroudClearingRange = 150
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  FenceWidth      = 28  ; Spacing used by the fence tool in worldbuilder.
  FenceXOffset    = 0   ; Offset used by the fence tool in worldbuilder so corners line up.
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE LINEBUILD DEFENSIVE_WALL
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
  End

  Behavior                 = DestroyDie ModuleTag_03
    ; none
  End
  Behavior                 = CreateObjectDie ModuleTag_04
    CreationList      = OCL_GenericWallSegmentDebris
  End
  Behavior                 = FXListDie ModuleTag_05
    DeathFX           = FX_GenericWallSegmentDeath
  End

  Geometry            = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 8.0
  GeometryHeight      = 12.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;Added for the Hub piece
Object GLAWallHub

  ; *** ART Parameters ***
  SelectPortrait         = SUBarricade_L
  ButtonImage            = SUBarricade
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model         = UBBurnBarrX
      ParticleSysBone        = Fire01 FireBurningBarricade02
      ParticleSysBone        = Smoke01 SmokeBurningBarricade02
      ParticleSysBone        = Smoke02 SmokeBurningBarricade02
    End
    ConditionState = DAMAGED
      Model         = UBBurnBarrX_D
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBBurnBarrX_E
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Wall
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLABarracks
  End
  BuildCost        = 50
  BuildTime        = 1.0           ; in seconds
  VisionRange      = 150.0           ; Shroud clearing distance
  ShroudClearingRange = 150
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  FenceWidth      = 20  ; Spacing used by the fence tool in worldbuilder.
  FenceXOffset    = 0   ; Offset used by the fence tool in worldbuilder so corners line up.
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE LINEBUILD DEFENSIVE_WALL
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior                 = DestroyDie ModuleTag_03
    ; none
  End
  Behavior                 = CreateObjectDie ModuleTag_04
    CreationList      = OCL_GenericWallSegmentDebris
  End
  Behavior                 = FXListDie ModuleTag_05
    DeathFX           = FX_GenericWallSegmentDeath
  End

  Geometry            = BOX
  GeometryMajorRadius = 4.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 12.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object GLATrap

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState = NONE
      Model = NBWall
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TankTrap
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLABarracks
  End
  BuildCost           = 50
  BuildTime           = 1.0           ; in seconds
  EnergyProduction    = 0
  VisionRange         = 150.0           ; Shroud clearing distance
  ShroudClearingRange = 150
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  FenceWidth      = 14  ; Spacing used by the fence tool in worldbuilder.
  FenceXOffset    = 0   ; Offset used by the fence tool in worldbuilder so corners line up.
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE LINEBUILD DEFENSIVE_WALL
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End
  Behavior = DestroyDie ModuleTag_03
    ;nothing
  End
  Behavior                 = CreateObjectDie ModuleTag_04
    CreationList      = OCL_GenericWallSegmentDebris
  End
  Behavior                 = FXListDie ModuleTag_05
    DeathFX           = FX_GenericWallSegmentDeath
  End
  Geometry            = BOX
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object GLABurningBarrier

  ; *** ART Parameters ***
  SelectPortrait         = SUBarricade_L
  ButtonImage            = SUBarricade
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model         = UBBurnBarr
    End
    ConditionState = ENEMYNEAR
      Model         = UBBurnBarr
      ParticleSysBone        = Fire01 FireBurningBarricade01
      ParticleSysBone        = Fire02 FireBurningBarricade01
      ParticleSysBone        = Fire03 FireBurningBarricade01
      ParticleSysBone        = Fire04 FireBurningBarricade01
      ParticleSysBone        = Smoke01 SmokeBurningBarricade01
      ParticleSysBone        = Smoke02 SmokeBurningBarricade01
      ParticleSysBone        = Smoke03 SmokeBurningBarricade01
      ParticleSysBone        = Smoke04 SmokeBurningBarricade01
    End

    ConditionState = DAMAGED
      Model         = UBBurnBarr_D
    End
    ConditionState = DAMAGED ENEMYNEAR
      Model         = UBBurnBarr_D
      ParticleSysBone        = Fire01 FireBurningBarricade01
      ParticleSysBone        = Fire02 FireBurningBarricade01
      ParticleSysBone        = Fire03 FireBurningBarricade01
      ParticleSysBone        = Fire04 FireBurningBarricade01
      ParticleSysBone        = Fire05 FireBurningBarricade01
      ParticleSysBone        = Fire06 FireBurningBarricade01
      ParticleSysBone        = Fire07 FireBurningBarricade01
      ParticleSysBone        = Smoke01 SmokeBurningBarricade01
      ParticleSysBone        = Smoke02 SmokeBurningBarricade01
      ParticleSysBone        = Smoke03 SmokeBurningBarricade01
      ParticleSysBone        = Smoke04 SmokeBurningBarricade01
      ParticleSysBone        = Smoke05 SmokeBurningBarricade01
      ParticleSysBone        = Smoke06 SmokeBurningBarricade01
      ParticleSysBone        = Smoke07 SmokeBurningBarricade01
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBBurnBarr_E
    End
    ConditionState = REALLYDAMAGED RUBBLE ENEMYNEAR
      Model         = UBBurnBarr_E
      ParticleSysBone        = Fire01 FireBurningBarricade01
      ParticleSysBone        = Fire02 FireBurningBarricade01
      ParticleSysBone        = Fire03 FireBurningBarricade01
      ParticleSysBone        = Fire04 FireBurningBarricade01
      ParticleSysBone        = Fire05 FireBurningBarricade01
      ParticleSysBone        = Fire06 FireBurningBarricade01
      ParticleSysBone        = Fire07 FireBurningBarricade01
      ParticleSysBone        = Smoke01 SmokeBurningBarricade01
      ParticleSysBone        = Smoke02 SmokeBurningBarricade01
      ParticleSysBone        = Smoke03 SmokeBurningBarricade01
      ParticleSysBone        = Smoke04 SmokeBurningBarricade01
      ParticleSysBone        = Smoke05 SmokeBurningBarricade01
      ParticleSysBone        = Smoke06 SmokeBurningBarricade01
      ParticleSysBone        = Smoke07 SmokeBurningBarricade01
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BurningBarricade
  Side             = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLABarracks
  End
  BuildCost        = 50
  BuildTime        = 2.0           ; in seconds
  VisionRange      = 50.0       ; Shroud clearing distance
  ShroudClearingRange = 50
  ArmorSet
    Conditions      = None
    Armor           = WallArmor
    DamageFX        = StructureDamageFXNoShake
  End

  FenceWidth      = 40  ; Spacing used by the fence tool in worldbuilder.
  FenceXOffset    = 0   ; Offset used by the fence tool in worldbuilder so corners line up.
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE LINEBUILD DEFENSIVE_WALL
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
  End

  Behavior = EnemyNearUpdate ModuleTag_03
    ;nothing
  End

  Behavior = DestroyDie ModuleTag_04
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_05
    CreationList  = OCL_SmallStructureDebris
  End
  Behavior             = FXListDie ModuleTag_06
    DeathFX       = FX_SmallStructureDeath
  End
  Geometry            = BOX
  GeometryMajorRadius = 21.0
  GeometryMinorRadius = 7.0
  GeometryHeight      = 4.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End







;additions
;------------------------------------------------------------------------------
;GLA Reactor, Power Plant
Object GLAPowerPlant

  ; *** ART Parameters ***
  SelectPortrait         = SUReactor_L
  ButtonImage            = SUReactor
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = SNOW

    ConditionState    = NONE
      Model           = UBPwrPlant
      Animation       = UBPwrPlant.UBPwrPlant
      AnimationMode   = LOOP
      HideSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = BOX77 SteamMedium
    End
    ConditionState    = DAMAGED
      Model           = UBPwrPlant_D
      Animation       = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode   = LOOP
      HideSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBPwrPlant_E
      Animation       = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode   = LOOP
      HideSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Fire01 GLAPowerPlantFlame
      ParticleSysBone = Fire02 GLAPowerPlantFlame
      ParticleSysBone = Fire03 GLAPowerPlantFlame
    End
    ConditionState    = NIGHT
      Model           = UBPwrPlant
      Animation       = UBPwrPlant.UBPwrPlant
      AnimationMode   = LOOP
      ShowSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = BOX77 SteamMedium
    End
    ConditionState    = NIGHT DAMAGED
      Model           = UBPwrPlant_D
      Animation       = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode   = LOOP
      ShowSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState    = NIGHT REALLYDAMAGED RUBBLE
      Model           = UBPwrPlant_E
      Animation       = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode   = LOOP
      ShowSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Fire01 GLAPowerPlantFlame
      ParticleSysBone = Fire02 GLAPowerPlantFlame
      ParticleSysBone = Fire03 GLAPowerPlantFlame
    End


;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPwrPlant
      Animation          = UBPwrPlant.UBPwrPlant
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPwrPlant_D
      Animation          = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPwrPlant_E
      Animation          = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPwrPlant
      Animation          = UBPwrPlant.UBPwrPlant
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPwrPlant_D
      Animation          = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPwrPlant_E
      Animation          = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    ;**************************************************************************************************************************
  End
    
   ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:PowerPlant
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = GLAPalace
  End
  BuildCost           = 900
  BuildTime           = 15.0           ; in seconds
  EnergyProduction    = 5
  VisionRange         = 200.0          ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmorNoSubdual   ;can't be disabled while under construction
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = GLAPowerPlantCommandSet
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level
 
  ; *** AUDIO Parameters ***
  VoiceSelect         = UndergroundGeneratorSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_POWER MP_COUNT_FOR_VICTORY

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 800.0
    InitialHealth     = 800.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = MaxHealthUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
    AddMaxHealth  = 400.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
  ;Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
  ;  ConditionFlag = GARRISONED
  ;  TriggeredBy   = Upgrade_GLAFortifiedStructure
  ;End

  Behavior = CreateObjectDie ModuleTag_06
    CreationList  = OCL_GLAPowerPlantDeathFinal
    ExemptStatus = UNDER_CONSTRUCTION
  End

  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior = CreateObjectDie ModuleTag_08
    CreationList  = OCL_SmallStructureDebris
  End
  Behavior = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
    ; nothing, but is required if we have any Object-level Upgrades!
  End
  Behavior = PowerPlantUpdate ModuleTag_11
  End

  Behavior = RebuildHoleExposeDie ModuleTag_12
    HoleName      = GLAHolePowerPlant
    HoleMaxHealth = 500.0
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  ;**prevents negative power bug exploit
  Behavior         = GrantUpgradeCreate ModuleTag_SDZFix01
    UpgradeToGrant = DummyObjectUpgrade
    ExemptStatus   = UNDER_CONSTRUCTION
  End
  Behavior         = ArmorUpgrade ModuleTag_SDZFix02
    TriggeredBy    = DummyObjectUpgrade
  End

  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 34.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHolePowerPlant GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBUndTunn_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Flame01 FireBurningBarricade01
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBUndTunn_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
  End
End

;-----------------------------------------------------------------------------
Object GLAPowerPlantWindmillBlade

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = UBPwrPlant_D1
    End
  End

  ; ***DESIGN parameters ***
  ;EditorSorting   = DEBRIS

  ; *** ENGINEERING Parameters ***
  KindOf = CAN_CAST_REFLECTIONS IMMOBILE NO_COLLIDE HULK

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1.0
    InitialHealth   = 1.0
  End

  Behavior = PhysicsBehavior ModuleTag_03
    Mass = 50
    AllowBouncing = Yes
  End

  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 10000   ; min lifetime in msec
    MaxLifetime = 15000   ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay = 1000
    SinkRate = 1     ; in Dist/Sec
    DestructionDelay = 2000
  End

  Geometry = BOX
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    

End

;------------------------------------------------------------------------------
;Fake GLA Reactor, Power Plant
Object FakeGLAPowerPlant

  ; *** ART Parameters ***
  SelectPortrait         = SUReactor_L
  ButtonImage            = SUReactor
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = SNOW

    ConditionState    = NONE
      Model           = UBPwrPlant
      Animation       = UBPwrPlant.UBPwrPlant
      AnimationMode   = LOOP
      HideSubObject   = CXPoliceCar002               ;the night light
    End
    ConditionState    = DAMAGED
      Model           = UBPwrPlant_D
      Animation       = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode   = LOOP
      HideSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBPwrPlant_E
      Animation       = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode   = LOOP
      HideSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Fire01 GLAPowerPlantFlame
      ParticleSysBone = Fire02 GLAPowerPlantFlame
      ParticleSysBone = Fire03 GLAPowerPlantFlame
    End
    ConditionState    = NIGHT
      Model           = UBPwrPlant
      Animation       = UBPwrPlant.UBPwrPlant
      AnimationMode   = LOOP
      ShowSubObject   = CXPoliceCar002               ;the night light
    End
    ConditionState    = NIGHT DAMAGED
      Model           = UBPwrPlant_D
      Animation       = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode   = LOOP
      ShowSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState    = NIGHT REALLYDAMAGED RUBBLE
      Model           = UBPwrPlant_E
      Animation       = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode   = LOOP
      ShowSubObject   = CXPoliceCar002               ;the night light
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Fire01 GLAPowerPlantFlame
      ParticleSysBone = Fire02 GLAPowerPlantFlame
      ParticleSysBone = Fire03 GLAPowerPlantFlame
    End


;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPwrPlant
      Animation          = UBPwrPlant.UBPwrPlant
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPwrPlant_D
      Animation          = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPwrPlant_E
      Animation          = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPwrPlant
      Animation          = UBPwrPlant.UBPwrPlant
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPwrPlant_D
      Animation          = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPwrPlant_E
      Animation          = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    ;**************************************************************************************************************************
  End
    
   ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPwrPlant_A6S
      Animation       = UBPwrPlant_A6S.UBPwrPlant_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:PowerPlant
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = GLAPalace
  End
  BuildCost           = 225
  BuildTime           = 8.0            ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLAPowerPlantCommandSet
  VisionRange         = 200.0          ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level
 
  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FAKE

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 200.0
    InitialHealth     = 200.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 320
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_SmallStructureDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLAPowerPlant
    TriggeredBy = Upgrade_BecomeRealGLAPowerPlant
  End

  ;Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
  ;  ConditionFlag = GARRISONED
  ;  TriggeredBy   = Upgrade_GLAFortifiedStructure
  ;End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 34.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 84
  ShadowSizeY = 94
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object GLAPrison

  ; *** ART Parameters ***
  SelectPortrait = SUPrison_L
  ButtonImage    = SUPrison

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = PRISONYARD 
    
    ; day
    ConditionState    = NONE
      Model           = UBPrison
      Animation       = UBPrison.UBPrison
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = DAMAGED
      Model           = UBPrison_D
      Animation       = UBPrison_D.UBPrison_D
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBPrison_E
      Animation       = UBPrison_E.UBPrison_E
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End

    ; snow
    ConditionState    = SNOW
      Model           = UBPris_S
      Animation       = UBPris_S.UBPris_S
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = DAMAGED SNOW
      Model           = UBPriso_SD
      Animation       = UBPriso_SD.UBPriso_SD
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBPriso_ES
      Animation       = UBPriso_ES.UBPriso_ES
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBPrison_N
      Animation       = UBPrison_N.UBPrison_N
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBPrison_DN
      Animation       = UBPrison_DN.UBPrison_DN
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBPrison_EN
      Animation       = UBPrison_EN.UBPrison_EN
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End

    ; snow night
    ConditionState    = SNOW NIGHT
      Model           = UBPris_S
      Animation       = UBPris_S.UBPris_S
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = DAMAGED SNOW NIGHT
      Model           = UBPriso_SD
      Animation       = UBPriso_SD.UBPriso_SD
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model           = UBPriso_ES
      Animation       = UBPriso_ES.UBPriso_ES
      AnimationMode   = LOOP
      ParticleSysBone = Mesh13 ChimneySmokeSmall
      ParticleSysBone = Object11 SteamVent
    End



;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrison
      Animation          = UBPrison.UBPrison
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrison_D
      Animation          = UBPrison_D.UBPrison_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrison_E
      Animation          = UBPrison_E.UBPrison_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPris_S
      Animation          = UBPris_S.UBPris_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
      Model              = UBPriso_SD
      Animation          = UBPriso_SD.UBPriso_SD
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
      Model              = UBPriso_ES
      Animation          = UBPriso_ES.UBPriso_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPrison_N
      Animation          = UBPrison_N.UBPrison_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPrison_DN
      Animation          = UBPrison_DN.UBPrison_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPrison_EN
      Animation          = UBPrison_EN.UBPrison_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT
      Model              = UBPris_S
      Animation          = UBPris_S.UBPris_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW NIGHT
      Model              = UBPriso_SD
      Animation          = UBPriso_SD.UBPriso_SD
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW NIGHT
      Model              = UBPriso_ES
      Animation          = UBPriso_ES.UBPriso_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    
    ConditionState = AWAITING_CONSTRUCTION
      Model = None
    End
    AliasConditionState = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION SNOW
    AliasConditionState = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState = SOLD 
    AliasConditionState = SOLD DAMAGED
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = SOLD NIGHT
    AliasConditionState = SOLD NIGHT DAMAGED
    AliasConditionState = SOLD NIGHT REALLYDAMAGED
    AliasConditionState = SOLD SNOW
    AliasConditionState = SOLD SNOW DAMAGED
    AliasConditionState = SOLD SNOW REALLYDAMAGED
    AliasConditionState = SOLD NIGHT SNOW
    AliasConditionState = SOLD NIGHT SNOW DAMAGED
    AliasConditionState = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End
    
  ; ----------------- the factory door -------------------
  Draw = W3DModelDraw ModuleTag_02
  IgnoreConditionStates = SNOW NIGHT

    DefaultConditionState
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_1_OPENING
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_1_CLOSING
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   

    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   

    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A8
      Flags           = START_FRAME_FIRST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model           = UBPrison_A7D
      Flags           = START_FRAME_FIRST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model           = UBPrison_A7E
      Flags           = START_FRAME_FIRST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState    = AWAITING_CONSTRUCTION 
      Model           = NONE
    End
    AliasConditionState = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = SOLD
    AliasConditionState = SOLD DAMAGED
    AliasConditionState = SOLD REALLYDAMAGED

  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_03
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_04
    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ;----- GLA Flag -----
  Draw = W3DModelDraw ModuleTag_Flag01
    IgnoreConditionStates = NIGHT SNOW
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = UBPrison_AF
      Animation     = UBPrison_AF.UBPrison_AF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = RUBBLE

    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_AF
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED RUBBLE

    ConditionState    = SOLD
      Model           = NONE
    End
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION RUBBLE
  End
  
  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBPrisonF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBPrisonF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBPrisonF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBPrisonF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBPrisonF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBPrisonF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  PlacementViewAngle  = -135

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Prison
  Side                = GLA
  EditorSorting       = STRUCTURE
  BuildCost           = 1500
  BuildTime           = 30.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = GLAPrisonCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 150 150 150 150  ; Experience point value at each level

  Prerequisites
    Object = GLAPalace
  End

  ; *** AUDIO Parameters ***
  VoiceSelect           = PrisonSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  UnitSpecificSounds
    UnderConstruction   = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY FS_TECHNOLOGY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY
  Body                = StructureBody ModuleTag_05
    MaxHealth         = 2000.0
    InitialHealth     = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior                 = RebuildHoleExposeDie ModuleTag_09
    HoleName          = GLAHolePrison
    HoleMaxHealth     = 500.0
  End 
  Behavior                 = DestroyDie ModuleTag_10
    ;<NO DATA>
  End
  Behavior                 = CreateObjectDie ModuleTag_12
    CreationList      = OCL_ABPowerPlantExplode
  End
  Behavior                 = FXListDie ModuleTag_13
    DeathFX           = FX_StructureMediumDeath
  End  
  Behavior = ProductionUpdate ModuleTag_14
    NumDoorAnimations            = 1
    DoorOpeningTime              = 3000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 3000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_15
    UnitCreatePoint   = X:  -20.0  Y:  15.0   Z:0.0
    NaturalRallyPoint = X: -20.0  Y:  65.0   Z:0.0
  End

  Behavior = FlammableUpdate ModuleTag_17
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Geometry            = BOX
  GeometryMajorRadius = 30.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25     ; How much space to leave for units exiting.
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin GLAHolePrison GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBPrison_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBPrison_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
  End
End

;DemoDrop Demo Trap object. Replaced with special DemoTrap when landed
;-------------------------------------------------------------
Object GLADemoTrap_DemoDropBomb

  ; *** ART Parameters ***
  SelectPortrait         = SSHideBomb_L
  ButtonImage            = SSHideBomb

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE SNOW
    DefaultConditionState
      Model         = EXHideBomb
      Animation     = EXHideBomb.EXHideBomb
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End
    ConditionState  = NIGHT
      Model         = EXHideBomb
      Animation     = EXHideBomb.EXHideBomb
      AnimationMode = LOOP
      AnimationSpeedFactorRange = 0.2 0.2
    End
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DemoTrap
  Side             = GLA
  EditorSorting    = SYSTEM

  TransportSlotCount  = 1
  VisionRange         = 150.0           ; Shroud clearing distance
  ShroudClearingRange = 150.0           ; Shroud clearing distance
  ExperienceValue     = 10 10 10 10     ; Experience point value at each level

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = DefaultDamageFX ; Too small for normal building FX, but if we do make dedicated one it should be silent
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PROJECTILE PARACHUTABLE ;UNATTACKABLE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End
  Locomotor = SET_NORMAL None

  Behavior = PhysicsBehavior ModuleTag_04
    Mass   = 75.0
    KillWhenRestingOnGround = Yes
  End

  Behavior = DestroyDie ModuleTag_05
    ;nothing
  End
  Behavior = CreateObjectDie ModuleTag_06
    CreationList = OCL_DemoTrapOnGround
    TransferPreviousHealth = Yes
  End
  Behavior = FXListDie ModuleTag_07
    DeathFX = FX_DemoTrapOnGround
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 4.0
  GeometryHeight = 9    
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;DemoDrop special Demo Trap. No sell button, weaker, damages less
;------------------------------------------------------------------------------
Object GLADemoTrap_DemoDrop

  ; *** ART Parameters ***
  SelectPortrait         = SSHideBomb_L
  ButtonImage            = SSHideBomb

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE SNOW
    DefaultConditionState
      Model         = EXHideBomb
      Animation     = EXHideBomb.EXHideBomb
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End
    ConditionState  = NIGHT
      Model         = EXHideBomb
      Animation     = EXHideBomb.EXHideBomb
      AnimationMode = LOOP
      AnimationSpeedFactorRange = 0.2 0.2
    End
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DemoTrap
  Side             = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLAArmsDealer
  End
  EnergyProduction    = 0
  VisionRange         = 150.0           ; Shroud clearing distance
  ShroudClearingRange = 150.0           ; Shroud clearing distance
  ExperienceValue     = 10 10 10 10     ; Experience point value at each level

  WeaponSet
    ;The weapon set is used to determine detonation mode
    Conditions = None 
    Weapon = PRIMARY    DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = TERTIARY   DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   NONE
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = DefaultDamageFX ; Too small for normal building FX, but if we do make dedicated one it should be silent
  End

  CommandSet = GLADemoTrapCommandSetNoSell ;GLADemoTrapCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = UndergroundGeneratorSelect
  SoundOnDamaged        = NoSound
  SoundOnReallyDamaged  = NoSound

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE DEMOTRAP SALVAGER
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0   
    InitialHealth   = 100.0
  End

  Behavior = StealthUpdate ModuleTag_03
    StealthDelay = 0 ; msec
    StealthForbiddenConditions = NONE
    FriendlyOpacityMin = 100.0%
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = DemoTrapUpdate ModuleTag_04
    DefaultProximityMode      = Yes       ;If yes, defaults to proximity mode, otherwise defaults to manual.
    DetonationWeaponSlot      = PRIMARY   ;The slot the weapon is in when it detonates.
    ProximityModeWeaponSlot   = SECONDARY ;The slot proximity mode is determined by (bogus weapon)
    ManualModeWeaponSlot      = TERTIARY  ;The slot manual mode is determined by (bogus weapon)
    TriggerDetonationRange    = 40.0      ;Detonation range when in proximity mode (and must be on ground)
    IgnoreTargetTypes         = PROJECTILE UNATTACKABLE
    AutoDetonationWithFriendsInvolved = Yes ;GLA are low tech 
;    DetonationWeapon          = DemoTrapDetonationWeapon
    DetonateWhenKilled        = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 500
    FX = INITIAL FX_GLADemoTrapWarning
    Weapon = FINAL DemoDropDemoTrapDetonationWeapon
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = InstantDeathBehavior ModuleTag_08
    ; if we are under construction, use this death instead
    RequiredStatus = UNDER_CONSTRUCTION
    ; no effect
  End

  BuildCompletion = PLACED_BY_PLAYER
  
  Shadow          = SHADOW_VOLUME
  Geometry = CYLINDER
  GeometryMajorRadius = 4.0
  GeometryHeight = 9    
  GeometryIsSmall = Yes 

End

;------------------------------------------------------------------------------
Object FakeGLAStingerSite

  ; *** ART Parameters ***
  SelectPortrait         = SUStinger_L
  ButtonImage            = SUStinger

  UpgradeCameo1          = Upgrade_GLAAPRockets
  UpgradeCameo2          = Upgrade_GLAFortifiedStructure
  UpgradeCameo3          = Upgrade_GLACamoNetting
  ;UpgradeCameo4          = NONE
  ;UpgradeCameo5          = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
    End
    
    ConditionState = DAMAGED
      Model = UBStingerS_D
    End
    
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
    End

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
    End
    
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
    End
    
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
    End
    
    ; night  **********************************
    ConditionState       = NIGHT 
      Model              = UBStingerS_N
    End
    
    ConditionState       = DAMAGED NIGHT 
      Model              = UBStingerS_DN
    End
    
    ConditionState       = REALLYDAMAGED NIGHT  RUBBLE
      Model              = UBStingerS_EN
    End
       
    ; night snow **********************************
    ConditionState       = NIGHT SNOW
      Model              = UBStingerS_NS
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBStingerS_DNS
    End
    
    ConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE
      Model              = UBStingerS_ENS
    End
    
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
     ; Animation          = UBStingerS.UBStingerS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
     ; Animation          = UBStingerS_D.UBStingerS_D
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
     ; Animation          = UBStingerS_E.UBStingerS_E
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBStingerS_N
     ; Animation          = UBStingerS_N.UBStingerS_N
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBStingerS_DN
     ; Animation          = UBStingerS_DN.UBStingerS_DN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBStingerS_EN
     ; Animation          = UBStingerS_EN.UBStingerS_EN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
     ; Animation          = UBStingerS_S.UBStingerS_S
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
     ; Animation          = UBStingerS_DS.UBStingerS_DS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
     ; Animation          = UBStingerS_ES.UBStingerS_ES
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBStingerS_NS
     ; Animation          = UBStingerS_NS.UBStingerS_NS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBStingerS_DNS
     ; Animation          = UBStingerS_DNS.UBStingerS_DNS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBStingerS_ENS
     ; Animation          = UBStingerS_ENS.UBStingerS_ENS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBStngrSF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBStngrSF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBStngrSF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBStngrSF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBStngrSF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBStngrSF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:StingerSite
  Side                = GLA
  EditorSorting       = STRUCTURE
  Prerequisites
    Object            = GLABarracks
  End
  BuildCost           = 225
  BuildTime           = 7.5           ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLAStingerSiteCommandSet
  VisionRange         = 600.0           ; Shroud clearing distance
  ShroudClearingRange = 400

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY None
    Weapon            = TERTIARY SuicideWeapon
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StingerSiteArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE SPAWNS_ARE_THE_WEAPONS SCORE_CREATE FS_FAKE

  Body                = HiveStructureBody ModuleTag_07 ;Requires SpawnBehavior!
    MaxHealth         = 250.0
    InitialHealth     = 250.0
    ;**Careful with these damage types -- because area damage types will already
    ;**damage slaves.
    PropagateDamageTypesToSlavesWhenExisting = NONE +SMALL_ARMS +SNIPER +POISON +RADIATION +SURRENDER +MICROWAVE
    SwallowDamageTypesIfSlavesNotExisting = NONE +SNIPER +RADIATION +SURRENDER +MICROWAVE ;+POISON

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 325
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLAStingerSite
    TriggeredBy = Upgrade_BecomeRealGLAStingerSite
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = FireWeaponWhenDeadBehavior ModuleTag_Stinger01
    DeathWeapon   = StingerSiteDeathConcussion
    StartsActive  = Yes
  End
  Behavior = SpawnPointProductionExitUpdate ModuleTag_Stinger02
    SpawnPointBoneName = SpawnPoint
  End
  Behavior                = SpawnBehavior ModuleTag_Stinger03
    SpawnNumber           = 3
    SpawnReplaceDelay     = 18000 ;30000 ;msec   ;hey, it's a base defense! make it less useless! :P
    SpawnTemplateName     = FakeGLAInfantryStingerSoldier  ;decoy infantry >:D
    CanReclaimOrphans     = No
    SpawnedRequireSpawner = Yes
    SlavesHaveFreeWill = No
  End

  Geometry            = CYLINDER
  GeometryMajorRadius = 36.0
  GeometryHeight      = 9.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 96
  ShadowSizeY = 80
  BuildCompletion     = PLACED_BY_PLAYER

End

; -----------------------------------------------------------------------------
Object FakeGLATunnelNetwork

  ; *** ART Parameters ***
  SelectPortrait         = SUTunnel_L
  ButtonImage            = SUTunnel

  UpgradeCameo1           = Upgrade_GLAAPBullets
  UpgradeCameo2           = Upgrade_GLAFortifiedStructure
  UpgradeCameo3           = Upgrade_GLACamoNetting
  ;UpgradeCameo4           = NONE
  ;UpgradeCameo5           = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model             = UBUndTunn
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState      = DAMAGED
      Model             = UBUndTunn_D
    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBUndTunn_E
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW
      Model             = UBUndTunn_S
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBUndTunn_DS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunn_ES
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    
    
    ConditionState      = NIGHT
      Model             = UBUndTunn_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBUndTunn_DN
    End
    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBUndTunn_EN
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW NIGHT
      Model             = UBUndTunn_NS
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBUndTunn_DNS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBUndTunn_ENS
      ParticleSysBone   = Steam01 SteamVent
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBUndTunn
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBUndTunn_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBUndTunn_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBUndTunn_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBUndTunn_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBUndTunn_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBUndTunn_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBUndTunn_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBUndTunn_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBUndTunn_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBUndTunn_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBUndTunn_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    =  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBUndTunF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBUndTunF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBUndTunF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBUndTunF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBUndTunF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLABarracks
  End
  BuildCost           = 200
  BuildTime           = 7.5           ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLATunnelNetworkCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY FakeTunnelNetworkGun  ;no damage, distraction only
    Weapon            = TERTIARY SuicideWeapon
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = TunnelNetworkArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    TurretMoveLoop        = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMUNE_TO_CAPTURE SCORE_CREATE SALVAGER FS_FAKE

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 250.0
    InitialHealth     = 250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 325
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    Turret
      TurretTurnRate        = 180   ;turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed; defensive weapon
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABTunnelNetworkDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLATunnelNetwork
    TriggeredBy = Upgrade_BecomeRealGLATunnelNetwork
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 80
  ShadowSizeY = 64
  BuildCompletion = PLACED_BY_PLAYER

End

; FAKE SCUD Storm! (PROTIP: use this for trolling and drama-generating technique only)
;------------------------------------------------------------------------------
Object FakeGLAScudStorm

  ; *** ART Parameters ***
  SelectPortrait         = SUScudStorm_L
  ButtonImage            = SUScudStorm

  UpgradeCameo1 = Upgrade_GLAAnthraxBeta
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    ; day
    ConditionState = NONE ; lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY Trans_ATTACKING ; from lying around to straight up
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B

    TransitionState = Trans_ATTACKING Trans_READY ; empty arms going underground, coming up with presents for bad people
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ; day
    ConditionState = DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED Trans_ATTACKING_DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED Trans_READY_DAMAGED
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED Trans_ATTACKING_REALLYDAMAGED
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED Trans_READY_REALLYDAMAGED
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ;  SNOW
    ConditionState =  SNOW ; from underground to lying around
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_SNOW Trans_ATTACKING_SNOW
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING  SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2S
      Animation     = UBScudStrm_A2S.UBScudStrm_A2S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B  SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B SNOW

    TransitionState = Trans_ATTACKING_SNOW Trans_READY_SNOW ; empty arms going underground
      Model         = UBScudStrm_A3S
      Animation     = UBScudStrm_A3S.UBScudStrm_A3S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED  SNOW
      Model              = UBScudStrm_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED  SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED  SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_SNOW Trans_ATTACKING_DAMAGED_SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED SNOW
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_SNOW Trans_READY_DAMAGED_SNOW
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_SNOW Trans_ATTACKING_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_SNOW Trans_READY_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT
    ConditionState = NIGHT ; from underground to lying around
      Model         = UBScudStrm_A1N
      Animation     = UBScudStrm_A1N.UBScudStrm_A1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHT Trans_ATTACKING_NIGHT
      Model         = UBScudStrm_A1N
      Animation     = UBScudStrm_A1N.UBScudStrm_A1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING NIGHT  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2N
      Animation     = UBScudStrm_A2N.UBScudStrm_A2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT

    TransitionState = Trans_ATTACKING_NIGHT Trans_READY_NIGHT ; empty arms going underground
      Model         = UBScudStrm_A3N
      Animation     = UBScudStrm_A3N.UBScudStrm_A3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBScudStrm_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
      Model              = UBScudStrm_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
      Model              = UBScudStrm_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHT Trans_ATTACKING_DAMAGED_NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED NIGHT
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHT Trans_READY_DAMAGED_NIGHT
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHT Trans_ATTACKING_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHT Trans_READY_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT SNOW
    ConditionState = NIGHT SNOW ; from underground to lying around
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHTSNOW Trans_ATTACKING_NIGHTSNOW
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING NIGHT SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2NS
      Animation     = UBScudStrm_A2NS.UBScudStrm_A2NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT SNOW

    TransitionState = Trans_ATTACKING_NIGHTSNOW Trans_READY_NIGHTSNOW ; empty arms going underground
      Model         = UBScudStrm_A3NS
      Animation     = UBScudStrm_A3NS.UBScudStrm_A3NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBScudStrm_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
      Model              = UBScudStrm_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
      Model              = UBScudStrm_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHTSNOW Trans_ATTACKING_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    ConditionState = ATTACKING DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHTSNOW Trans_READY_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHTSNOW Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW Trans_READY_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End

    ;-------------------------------------------------------------------------------------------------------------------------
    ;-------------------------------------------------------------------------------------------------------------------------
    ;-------------------------------------------------------------------------------------------------------------------------

  ;---- Blinking red light in middle -----
  Draw = W3DModelDraw ModuleTag_02
    IgnoreConditionStates = NIGHT SNOW DAMAGED
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = PREATTACK_B ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = REALLYDAMAGED
      Model         = NONE
    End
    AliasConditionState = PREATTACK_B ATTACKING REALLYDAMAGED
    AliasConditionState = ATTACKING REALLYDAMAGED
    AliasConditionState = RUBBLE
    AliasConditionState = SOLD
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED

  End

  ;------ Canvas roof and aerial -----
  Draw = W3DModelDraw ModuleTag_03
    IgnoreConditionStates = NIGHT ;SNOW
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = UBScudStrm_A6
      Animation     = UBScudStrm_A6.UBScudStrm_A6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState = SNOW
      Model         = UBScudStr_A6S
      Animation     = UBScudStr_A6S.UBScudStr_A6S
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState = DAMAGED
      Model         = UBScudStrm_DA6
      Animation     = UBScudStrm_DA6.UBScudStrm_DA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState = DAMAGED SNOW
    
    ConditionState = REALLYDAMAGED
      Model         = UBScudStrm_EA6
      Animation     = UBScudStrm_EA6.UBScudStrm_EA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState = REALLYDAMAGED SNOW
    AliasConditionState = RUBBLE
    AliasConditionState = RUBBLE SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm_A6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBScudStr_A6S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_DA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_EA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED RUBBLE SNOW

    ConditionState       = SOLD
      Model              = NONE
    End
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD DAMAGED SNOW
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED SNOW
    AliasConditionState  = SOLD RUBBLE
    AliasConditionState  = SOLD RUBBLE SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION RUBBLE SNOW
    
  End

  ;----- GLA Flag -----
  Draw = W3DModelDraw ModuleTag_04
    IgnoreConditionStates = NIGHT SNOW
    OkToChangeModelColor = Yes
  
    DefaultConditionState
      Model         = UBScudStrm_F
      Animation     = UBScudStrm_F.UBScudStrm_F
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  DAMAGED
      Model         = UBScudStrm_DF
      Animation     = UBScudStrm_DF.UBScudStrm_DF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  REALLYDAMAGED
      Model         = UBScudStrm_EF
      Animation     = UBScudStrm_EF.UBScudStrm_EF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState = RUBBLE

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm_F
      Animation          = UBScudStrm_F.UBScudStrm_F
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_DF
      Animation          = UBScudStrm_DF.UBScudStrm_DF
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_EF
      Animation          = UBScudStrm_EF.UBScudStrm_EF
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED RUBBLE
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION RUBBLE
  End
   
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End    
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End   
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBScudStrmF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBScudStrmF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBScudStrmF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBScudStrmF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBScudStrmF_SD
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBScudStrmF_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End
  
  ; ------------ New SCUD Storm Goo  -----------------
  Draw = W3DModelDraw ModuleTag_ScudGoo01
    OkToChangeModelColor = Yes
    IgnoreConditionStates = NIGHT SNOW DAMAGED REALLYDAMAGED RUBBLE

    DefaultConditionState
      Model = UBScudStrm_B
      TransitionKey = Trans_READY
    End
    TransitionState = Trans_READY Trans_ATTACKING
      ParticleSysBone = FXBone01 ScudStormBuildingGoo
      ParticleSysBone = FXBone02 ScudStormBuildingGoo
      ParticleSysBone = FXBone03 ScudStormBuildingGoo
    End
    ConditionState = ATTACKING
      ParticleSysBone = FXBone01 ScudStormBuildingGoo
      ParticleSysBone = FXBone02 ScudStormBuildingGoo
      ParticleSysBone = FXBone03 ScudStormBuildingGoo
      TransitionKey = Trans_ATTACKING
    End
    AliasConditionState = ATTACKING FIRING_B
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B

    ConditionState = USER_1
      Model = UBScudStrm_B
      TransitionKey = Trans_READY_Upgraded
    End
    TransitionState = Trans_READY_Upgraded Trans_ATTACKING_Upgraded
      ParticleSysBone = FXBone01 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone02 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone03 ScudStormBuildingGooBeta
    End
    ConditionState = ATTACKING USER_1
      ParticleSysBone = FXBone01 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone02 ScudStormBuildingGooBeta
      ParticleSysBone = FXBone03 ScudStormBuildingGooBeta
      TransitionKey = Trans_ATTACKING_Upgraded
    End
    AliasConditionState = ATTACKING FIRING_B USER_1
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B USER_1

    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UBScudStrm_B
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED USER_1

    ConditionState = SOLD
      Model = None
    End
    AliasConditionState = SOLD USER_1

  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScudStorm
  Side = GLA
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = GLAPalace
  End
  BuildCost           = 1250
  BuildTime           = 30.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = FakeGLAScudStormCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  ShroudRevealToAllRange = 60  ; Reveals shroud to all players at a specific amount which can be different. 
                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY   DummyWeapon
    AutoChooseSources = PRIMARY   NONE
    Weapon            = SECONDARY FakeScudStormWeapon
    AutoChooseSources = SECONDARY NONE
    Weapon            = TERTIARY SuicideWeapon
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = ScudStorm

  ; *** AUDIO Parameters ***
  VoiceSelect          = FakeBuildingSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop

  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart = NoSound
    TurretMoveLoop = NoSound ;These aren't playing properly, will revisit (mp) TurretMoveLoopLoud
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_SUPERWEAPON FS_FAKE

  Body                = StructureBody ModuleTag_07
    MaxHealth         = 1000.0
    InitialHealth     = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_08
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = ProductionUpdate ModuleTag_09
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior = FXListDie ModuleTag_12
    DeathFX       = FX_BuildingDie
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = GLAScudStorm
    TriggeredBy = Upgrade_BecomeRealGLASCUDStorm
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior    = OCLSpecialPower ModuleTag_Scud01
    SpecialPowerTemplate = SuperweaponScudStorm
    OCL                  = SUPERWEAPON_ScudStorm
  End
  Behavior = SpecialPowerCreate ModuleTag_Scud02
    ;nothing
  End

  Behavior = RadiusDecalUpdate ModuleTag_Scud03
    ; nothing
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Weapon01Visual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLAAnthraxBeta
  End

  Geometry            = BOX
  GeometryMajorRadius = 71.0
  GeometryMinorRadius = 67.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 204
  ShadowSizeY = 148
  BuildCompletion = PLACED_BY_PLAYER

End

