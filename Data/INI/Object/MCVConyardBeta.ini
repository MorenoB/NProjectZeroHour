;------------------------------------------------------------------------------
;Con Yard
Object ConYard

  ; *** ART Parameters ***
  SelectPortrait         = SUHeadquarters_L
  ButtonImage            = SUHeadquarters
  UpgradeCameo1          = Upgrade_GLAFortifiedStructure

  ; ----- The actual command center
  Draw                   = W3DModelDraw ModuleTag_01
     
    OkToChangeModelColor = Yes
    
    ; day
    ConditionState       = NONE
      Model              = UBCmdHQC
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC.UBCmdHQC
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = UBCmdHQC_D
      Animation          = UBCmdHQC_D.UBCmdHQC_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = UBCmdHQC_E
      Animation          = UBCmdHQC_E.UBCmdHQC_E
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBCmdHQCE
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE.UBCmdHQCE
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBCmdHQCE_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_D.UBCmdHQCE_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBCmdHQCE_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_E.UBCmdHQCE_E
      AnimationMode        = LOOP
    End

    ; night    
    ConditionState       = NIGHT
      Model              = UBCmdHQC_N
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC_N.UBCmdHQC_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = UBCmdHQC_DN
      Animation          = UBCmdHQC_DN.UBCmdHQC_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = UBCmdHQC_EN
      Animation          = UBCmdHQC_EN.UBCmdHQC_EN
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBCmdHQCE_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_N.UBCmdHQCE_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBCmdHQCE_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_DN.UBCmdHQCE_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBCmdHQCE_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_EN.UBCmdHQCE_EN
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState       = SNOW
      Model              = UBCmdHQC_S
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC_S.UBCmdHQC_S
      AnimationMode      = LOOP
    End   
    ConditionState       = DAMAGED SNOW
      Model              = UBCmdHQC_DS
      Animation          = UBCmdHQC_DS.UBCmdHQC_DS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = UBCmdHQC_ES
      Animation          = UBCmdHQC_ES.UBCmdHQC_ES
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBCmdHQCE_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_S.UBCmdHQCE_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBCmdHQCE_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_DS.UBCmdHQCE_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBCmdHQCE_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_ES.UBCmdHQCE_ES
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState       = NIGHT SNOW
      Model              = UBCmdHQC_NS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC_NS.UBCmdHQC_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBCmdHQC_DNS
      Animation          = UBCmdHQC_DNS.UBCmdHQC_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = UBCmdHQC_ENS
      Animation          = UBCmdHQC_ENS.UBCmdHQC_ENS
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBCmdHQCE_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_NS.UBCmdHQCE_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQCE_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_DNS.UBCmdHQCE_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQCE_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_ENS.UBCmdHQCE_ENS
      AnimationMode        = LOOP
    End

        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBCmdHQC
      Animation          = UBCmdHQC.UBCmdHQC
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBCmdHQC_D
      Animation          = UBCmdHQC_D.UBCmdHQC_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBCmdHQC_E
      Animation          = UBCmdHQC_E.UBCmdHQC_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBCmdHQC_N
      Animation          = UBCmdHQC_N.UBCmdHQC_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBCmdHQC_DN
      Animation          = UBCmdHQC_DN.UBCmdHQC_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBCmdHQC_EN
      Animation          = UBCmdHQC_EN.UBCmdHQC_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBCmdHQC_S
      Animation          = UBCmdHQC_S.UBCmdHQC_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBCmdHQC_DS
      Animation          = UBCmdHQC_DS.UBCmdHQC_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBCmdHQC_ES
      Animation          = UBCmdHQC_ES.UBCmdHQC_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBCmdHQC_NS
      Animation          = UBCmdHQC_NS.UBCmdHQC_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBCmdHQC_DNS
      Animation          = UBCmdHQC_DNS.UBCmdHQC_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBCmdHQC_ENS
      Animation          = UBCmdHQC_ENS.UBCmdHQC_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End

  PlacementViewAngle = 0

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
    AnimationsRequirePower = No
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE DYING
    ;IgnoreConditionStates = PREATTACK_C FIRING_C BETWEEN_FIRING_SHOTS_C RELOADING_C

    DefaultConditionState
      Model = None
      TransitionKey = DOWN_DEFAULT
      ;WaitForStateToFinishIfPossible = UP_DAY
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT
    AliasConditionState = RELOADING_C NIGHT
    AliasConditionState = BETWEEN_FIRING_SHOTS_C SNOW
    AliasConditionState = RELOADING_C SNOW
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT SNOW
    AliasConditionState = RELOADING_C NIGHT SNOW

    ConditionState   = PREATTACK_C
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_DAY
    End
    ConditionState   = PREATTACK_C NIGHT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_NIGHT
    End
    ConditionState   = PREATTACK_C SNOW
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOW
    End
    ConditionState   = PREATTACK_C SNOW NIGHT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOWNIGHT
    End

    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03

    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE DYING

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End

    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT
    AliasConditionState = RELOADING_C NIGHT
    AliasConditionState = BETWEEN_FIRING_SHOTS_C SNOW
    AliasConditionState = RELOADING_C SNOW
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT SNOW
    AliasConditionState = RELOADING_C NIGHT SNOW

    ConditionState   = PREATTACK_C
     Model            = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_DAY
    End
    ConditionState   = PREATTACK_C NIGHT
     Model            = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_NIGHT
    End
    ConditionState   = PREATTACK_C SNOW
     Model            = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOW
    End
    ConditionState   = PREATTACK_C SNOW NIGHT
     Model            = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOWNIGHT
    End


    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

  End

  ; Officers club flag
  Draw = W3DModelDraw ModuleTag_OfficersClub
    OkToChangeModelColor = No

    ConditionState       = NONE
      Model              = None
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED
    AliasConditionState  = RUBBLE
    AliasConditionState  = REALLYDAMAGED RUBBLE
    ConditionState       = PREORDER
      Model              = OCFlagGLA
      Animation          = OCFlagGLA.OCFlagGLA
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
;    ConditionState       = PREORDER DAMAGED
;      Model              = OCFlagGLA_D
;      Animation          = OCFlagGLA_D.OCFlagGLA_D
;      AnimationMode      = LOOP
;      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
;    End
;    ConditionState       = PREORDER REALLYDAMAGED RUBBLE
;      Model              = OCFlagGLA_E
;      Animation          = OCFlagGLA_E.OCFlagGLA_E
;      AnimationMode      = LOOP
;      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
;    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CommandCenter
  Side                = Civilian
  EditorSorting       = STRUCTURE
  BuildCost           = 2000
  BuildTime           = 45.0           ; in seconds
  EnergyProduction    = 0  ;Command center should be free
  CommandSet          = ConYardCommandSet
  VisionRange         = 250.0           ; Shroud clearing distance
  ShroudClearingRange = 400

  WeaponSet 
    Conditions = None
    Weapon  = PRIMARY  ConYardRepairWeapon
    Weapon  = TERTIARY KillMCVWeapon
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WorkerVoiceSelect
  VoiceMove = WorkerVoiceMove
  VoiceAttack = WorkerVoiceMove
  VoiceGuard = WorkerVoiceMove
  VoiceFear = WorkerVoiceFear
  VoiceTaskComplete = WorkerVoiceBuildComplete
  SoundAmbientRubble = UnderConstructionLoop
  UnitSpecificSounds
    VoiceEnter        = WorkerVoiceMoveUpgraded
    VoiceEnterHostile = WorkerVoiceMoveUpgraded
    VoiceGarrison     = WorkerVoiceGarrison
    VoiceCreate       = WorkerVoiceCreate
    VoiceSupply       = WorkerVoiceSupply
    VoiceNoBuild      = WorkerVoiceBuildNot
    VoiceRepair       = WorkerVoiceRepair
    VoiceDisarm       = WorkerVoiceClearMine
    VoiceBuildResponse = WorkerVoiceBuild
    VoiceGetHealed    = WorkerVoiceMoveUpgraded
    VoiceMoveUpgraded = WorkerVoiceMoveUpgraded
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAN_ATTACK COMMANDCENTER CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY DOZER
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 5000.0
    InitialHealth     = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = WorkerAIUpdate ModuleTag_AI ;DozerAIUpdate cannot fire suicide weapon
    RepairHealthPercentPerSecond = 2%    ; % of max health to repair each second
    BoredTime  = 5000  ; in milliseconds
    BoredRange = 200   ; when bored, we look this far away to do something
  End
  Locomotor = SET_NORMAL None

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = PreorderCreate ModuleTag_PreorderCreate
  End

  Behavior = ProductionUpdate ModuleTag_05
    ; nothing
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_06
    UnitCreatePoint   = X: 25.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 65.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior        = RebuildHoleExposeDie ModuleTag_07
    HoleName      = GLAHoleCommandCenter
    HoleMaxHealth = 500.0
    DeathTypes    = ALL -EXTRA_2
  End
  Behavior        = DestroyDie ModuleTag_08
    DeathTypes    = ALL -EXTRA_2
  End  
  Behavior        = CreateObjectDie ModuleTag_09
    CreationList  = OCL_LargeStructureDebris
    DeathTypes    = ALL -EXTRA_2
  End
  Behavior        = FXListDie ModuleTag_10
    DeathFX       = FX_StructureMediumDeath
    DeathTypes    = ALL -EXTRA_2
  End

  Behavior           = OCLSpecialPower ModuleTag_11
    SpecialPowerTemplate = SuperweaponRebelAmbush
    UpgradeOCL           = SCIENCE_RebelAmbush3 Chem_SUPERWEAPON_RebelAmbush3
    UpgradeOCL           = SCIENCE_RebelAmbush2 Chem_SUPERWEAPON_RebelAmbush2
    OCL                  = Chem_SUPERWEAPON_RebelAmbush1
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End

  Behavior           = OCLSpecialPower ModuleTag_12
    SpecialPowerTemplate = SuperweaponBlackMarketNuke
    OCL                  = SUPERWEAPON_BlackMarketNuke
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Behavior           = OCLSpecialPower ModuleTag_13
    SpecialPowerTemplate = SuperweaponAnthraxBomb
    OCL                  = SUPERWEAPON_AnthraxBombGamma
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_14
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_21
    SpecialPowerTemplate = SuperweaponSneakAttack
    OCL                  = OCL_CreateSneakAttackTunnelStart
    ReferenceObject      = GLASneakAttackTunnelNetwork
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_22
    SpecialPowerTemplate = SuperweaponGPSScrambler
    OCL                  = SUPERWEAPON_GPSScrambler
    CreateLocation       = CREATE_AT_LOCATION
  End


  Behavior = CashBountyPower ModuleTag_15
    SpecialPowerTemplate    = SpecialAbilityCashBounty1
    Bounty                  = 5%
  End
  Behavior = CashBountyPower ModuleTag_16
    SpecialPowerTemplate    = SpecialAbilityCashBounty2
    Bounty                  = 10%
  End
  Behavior = CashBountyPower ModuleTag_17
    SpecialPowerTemplate    = SpecialAbilityCashBounty3
    Bounty                  = 20%
  End
 
  Behavior = FlammableUpdate ModuleTag_19
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior    = OCLSpecialPower ModuleTag_DemoDrop01   ;give toxin traps instead normal ones
    SpecialPowerTemplate = SuperweaponGLADemoDrop
    UpgradeOCL           = SCIENCE_GLADemoDrop3 Chem_SUPERWEAPON_DemoDrop3
    UpgradeOCL           = SCIENCE_GLADemoDrop2 Chem_SUPERWEAPON_DemoDrop2
    OCL                  = Chem_SUPERWEAPON_DemoDrop1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End



  Behavior = FireWeaponUpdate ModuleTag_StatusWeapon
    Weapon = ConYardStatusWeapon
  End

  Behavior        = CreateObjectDie ModuleTag_Unpack01
    CreationList  = OCL_MCV
    DeathTypes    = NONE +EXTRA_2
    TransferPreviousHealth = Yes ;so MCV is also damaged if con yard was damaged
  End
  Behavior = SlowDeathBehavior ModuleTag_Unpack02
    DeathTypes = NONE +EXTRA_2
    DestructionDelay = 5000
    OCL = INITIAL SupW_OCL_PatriotEMPEffectSpheroid ;wait the scaffolding
  End



  Geometry            = BOX
  GeometryMajorRadius = 65.0
  GeometryMinorRadius = 65.0
  GeometryHeight      = 54.0
  FactoryExitWidth    = 25 
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End


;---------------------------------------------------------------------------------------
Object MCV

  ; *** ART Parameters ***
  SelectPortrait = SUPOWTruck_L
  ButtonImage    = SUPOWTruck
  UpgradeCameo1  = Upgrade_GLAJunkRepair

  Draw = W3DTruckDraw ModuleTag_01

    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes 

    DefaultConditionState
      Model             = UVPOWTruck
      Turret            = Turret
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone  = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState      = MOVING
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState      = REALLYDAMAGED
      Model             = UVPOWTruck_D
      Turret            = Turret
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone  = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
      ParticleSysBone   = Smoke01 SteamVent
    End

    ConditionState      = MOVING REALLYDAMAGED
      Model             = UVPOWTruck_D
      Turret            = Turret
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone  = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone   = Smoke01 SteamVent
    End

    ConditionState      = RUBBLE
      Model             = UVPOWTruck_D1
      Turret            = Turret
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone  = PRIMARY Muzzle
      ParticleSysBone   = Smoke02 ScudMissleLauncherExplosionTrailSmoke
      ParticleSysBone   = Smoke03 SootySmokeColumn
    End
    AliasConditionState  = RUBBLE MOVING

    ConditionState      = REALLYDAMAGED RUBBLE FIRING_C ;suicide, no smoke
      Model             = UVPOWTruck
    End
    AliasConditionState = REALLYDAMAGED RUBBLE BETWEEN_FIRING_SHOTS_C
    AliasConditionState = REALLYDAMAGED RUBBLE RELOADING_C
    AliasConditionState = REALLYDAMAGED RUBBLE MOVING FIRING_C
    AliasConditionState = REALLYDAMAGED RUBBLE MOVING BETWEEN_FIRING_SHOTS_C
    AliasConditionState = REALLYDAMAGED RUBBLE MOVING RELOADING_C

    TrackMarks           = EXTireTrack.tga
    Dust                 = RocketBuggyDust
    DirtSpray            = RocketBuggyDirtSpray
    PowerslideSpray      = RocketBuggyDirtPowerSlide
    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone          = Tire01
    RightFrontTireBone         = Tire02
    MidLeftRearTireBone        = Tire03
    MidRightRearTireBone       = Tire05
    LeftRearTireBone           = Tire04
    RightRearTireBone          = Tire06
    TireRotationMultiplier     = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_fence
    AnimationsRequirePower = No
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE DYING
    ;IgnoreConditionStates = PREATTACK_C FIRING_C BETWEEN_FIRING_SHOTS_C RELOADING_C

    DefaultConditionState
      Model = None
      TransitionKey = DOWN_DEFAULT
      ;WaitForStateToFinishIfPossible = UP_DAY
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT
    AliasConditionState = RELOADING_C NIGHT
    AliasConditionState = BETWEEN_FIRING_SHOTS_C SNOW
    AliasConditionState = RELOADING_C SNOW
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT SNOW
    AliasConditionState = RELOADING_C NIGHT SNOW

    ConditionState   = PREATTACK_C
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_DAY
    End
    ConditionState   = PREATTACK_C NIGHT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_NIGHT
    End
    ConditionState   = PREATTACK_C SNOW
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOW
    End
    ConditionState   = PREATTACK_C SNOW NIGHT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOWNIGHT
    End

    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_scaff
    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    IgnoreConditionStates = DAMAGED REALLYDAMAGED RUBBLE DYING

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End

    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT
    AliasConditionState = RELOADING_C NIGHT
    AliasConditionState = BETWEEN_FIRING_SHOTS_C SNOW
    AliasConditionState = RELOADING_C SNOW
    AliasConditionState = BETWEEN_FIRING_SHOTS_C NIGHT SNOW
    AliasConditionState = RELOADING_C NIGHT SNOW

    ConditionState   = PREATTACK_C
     Model            = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_DAY
    End
    ConditionState   = PREATTACK_C NIGHT
     Model            = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_NIGHT
    End
    ConditionState   = PREATTACK_C SNOW
     Model            = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOW
    End
    ConditionState   = PREATTACK_C SNOW NIGHT
     Model            = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = UP_SNOWNIGHT
    End

    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 1.0 1.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:Dozer ;MCV
  Side = Civilian
  EditorSorting = VEHICLE
  TransportSlotCount = 5
  BuildCost       = 2000
  BuildTime       = 15.0 ;in seconds
  VisionRange         = 170
  ShroudClearingRange = 300

  ;**** PLACEHOLDERS PLACEHOLDERS PLACEHOLDERS PLACEHOLDERS PLACEHOLDERS ****
  WeaponSet
    Conditions = None 
    Weapon  = PRIMARY  ToxinTruckGunPlusOne
    Weapon  = TERTIARY KillMCVWeapon
    AutoChooseSources = TERTIARY None
  End
  WeaponSet
    Conditions = VETERAN
    Weapon  = PRIMARY  Chem_TunnelNetworkGunBeta
    Weapon  = TERTIARY KillMCVWeapon
    AutoChooseSources = TERTIARY None
  End
  WeaponSet 
    Conditions = ELITE
    Weapon  = PRIMARY  Chem_TunnelNetworkGunGamma
    Weapon  = TERTIARY KillMCVWeapon
    AutoChooseSources = TERTIARY None
  End
  WeaponSet 
    Conditions = HERO
    Weapon  = PRIMARY  Chem_TunnelNetworkGunGamma
    Weapon  = TERTIARY KillMCVWeapon
    AutoChooseSources = TERTIARY None
  End
  ;**** PLACEHOLDERS PLACEHOLDERS PLACEHOLDERS PLACEHOLDERS PLACEHOLDERS ****

  ArmorSet
    Conditions = None
    Armor      = MCVArmor
    DamageFX   = TruckDamageFX
  End

  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ExperienceValue     = 90 100 130 150 ;Experience point value at each level
  ExperienceRequired  = 0  40  80  160 ;Experience points needed to gain each level
  IsTrainable         = Yes            ;Can gain experience

  CommandSet = MCVCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect             = POWTruckGLAVoiceSelect
  VoiceMove               = POWTruckGLAVoiceMove
  VoiceAttack             = POWTruckGLAVoiceCrush
  VoiceAttackAir          = HumveeVoiceAttackTOW
  SoundMoveStart          = BombTruckMoveStart ;POWTruckUSAMoveStart
  SoundMoveStartDamaged   = BombTruckMoveStart ;POWTruckUSAMoveStart
  VoiceGuard              = POWTruckGLAVoiceMove
  SoundEnter              = EnterPOWTruck
  SoundExit               = ExitPOWTruck
  UnitSpecificSounds
    VoicePickup = POWTruckGLAVoicePickup
    VoiceReturn = POWTruckGLAVoiceReturn
    VoiceCreate           = POWTruckGLAVoiceCreate
    TurretMoveStart       = NoSound
    TurretMoveLoop        = TurretMoveLoop
    TruckLandingSound     = RocketBuggyLand
    TruckPowerslideSound  = POWTruckUSAMoveStart ;RocketBuggyPowerslide
    VoiceSupply           = POWTruckGLAVoicePickup ;WorkerVoiceSupply
    VoiceCrush            = POWTruckGLAVoiceCrush
    VoiceEnter            = POWTruckEnter
    VoiceUnload           = POWTruckExit
    VoiceSalvage          = POWTruckGLAVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD VEHICLE SCORE SELECTABLE CAN_CAST_REFLECTIONS SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth     = 5000.0 ;must be same as con yard building else when badly damage building transforms, MCV starts off dead
    InitialHealth = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 180
      TurretPitchRate = 180
      RecenterTime    = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL SupplyTruckLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 75.0
  End

  Behavior = SlowDeathBehavior ModuleTag_Death
    DeathTypes = ALL -EXTRA_2
    SinkDelay        = 3500
    SinkRate         = 2     ; in Dist/Sec
    DestructionDelay = 8000
    DestructionDelayVariance = 500
    OCL = INITIAL OCL_DeadRangerDebris          ;OCL_TechnicalAirDeathStart
    FX = INITIAL FX_TechnicalAirDeathGroundPart
    OCL = MIDPOINT OCL_ChinaPOWTruckDeathEffect    ;OCL_RocketBuggyAirDeath
    FX = MIDPOINT FX_BattleMasterExplosionOneFinal ;FX_RocketBuggyAirDeathAirPart
  End

  Behavior        = CreateObjectDie ModuleTag_Transform01
    CreationList  = OCL_ConYard
    DeathTypes    = NONE +EXTRA_2
    TransferPreviousHealth = Yes ;so MCV is also damaged if con yard was damaged
  End
  Behavior = SlowDeathBehavior ModuleTag_Transform02
    DeathTypes = NONE +EXTRA_2
    DestructionDelay = 3000
  End

  Behavior = TransitionDamageFX ModuleTag_TDFX
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = AutoHealBehavior ModuleTag_Heal
    HealingAmount = 42
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair Upgrade_Veterancy_ELITE ;or
  End

  Geometry = BOX
  GeometryMajorRadius = 17.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 15.0     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------

Object PickUpRefundCrates

  ; *** ART Parameters ***
  SelectPortrait         = SUWorker_L
  ButtonImage            = SUWorker
  
  UpgradeCameo1 = Upgrade_GLAWorkerShoes
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model         = UIWRKR_SKN
      IdleAnimation = UIWRKR_SKL.UIWRKR_CHA
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End

    ConditionState  = MOVING
      Animation     = UIWRKR_SKL.UIWRKR_RNA 16
      AnimationMode = LOOP
      Flags         = RANDOMSTART
      TransitionKey = TRANS_Moving
      ParticleSysBone = None InfantryDustTrails
    End
    ; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ; since we flip the bit once we get pretty close to the target. but it looks
    ; funky to do the construction animation while moving. 
    ; so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING

    ConditionState = ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MS
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Standing
    End

    ConditionState = MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MSW 50
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Moving
      ParticleSysBone = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING CARRYING

    TransitionState = TRANS_Stand TRANS_MetalDetector_Standing    ;STANDING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Stand    ;ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_MetalDetector_Standing    ;CARRYING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Carry    ;ATTACKING -> CARRYING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Carry TRANS_MetalDetector_Moving      ;CARRYING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_MetalDetector_Moving TRANS_Stand      ;MOVING ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away moving
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Stand TRANS_MetalDetector_Moving      ;STANDING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Standing   ;MOVING -> ATTACKING [STANDING]
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Moving   ;ATTACKING [STANDING] -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Moving     ;MOVING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End
    TransitionState = TRANS_MetalDetector_Moving TRANS_Moving     ;MOVING ATTACKING -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End


    ConditionState = MOVING CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARY 12
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
      ParticleSysBone = None InfantryDustTrails
    End
    ; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ; since we flip the bit once we get pretty close to the target. but it looks
    ; funky to do the construction animation while moving. 
    ; so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING CARRYING

    ConditionState = CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARST 30 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
    End

    ConditionState = DYING
      Animation = UIWRKR_SKL.UIWRKR_DTA
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End
    AliasConditionState = DYING CARRYING

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIWRKR_SKL.UIWRKR_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIWRKR_SKL.UIWRKR_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIWRKR_SKL.UIWRKR_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState  = SPECIAL_CHEERING
      Animation     = UIWRKR_SKL.UIWRKR_CHA
      AnimationMode = ONCE
    End
    
    ConditionState  = ACTIVELY_CONSTRUCTING
      Animation     = UIWRKR_SKL.UIWRKR_BDA
      AnimationMode = LOOP
      TransitionKey = TRANS_Constructing
    End
    AliasConditionState = ACTIVELY_CONSTRUCTING CARRYING

    ; --------------------

    TransitionState = TRANS_Stand TRANS_Carry
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_Stand
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE_BACKWARDS
      Flags         = START_FRAME_LAST
    End
    
    TransitionState = TRANS_Stand TRANS_Constructing
      Animation     = UIWRKR_SKL.UIWRKR_TRA1
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Constructing TRANS_Stand
      Animation     = UIWRKR_SKL.UIWRKR_TRA2
      AnimationMode = ONCE
    End
  End

  Scale = 0.8

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:Worker
  Side = Civilian
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)


  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End
  WeaponSet
    Conditions = MINE_CLEARING_DETAIL 
    Weapon = PRIMARY WorkerMineDisarmingWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 100
  ShroudClearingRange = 200
 ;Prerequisites
 ;  Object = GLABarracks GLASupplyStash ;commented out, or else you can't build from Con Yard as Dozer.
 ;End
  BuildCost = 200
  BuildTime = 5.0          ;in seconds    
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAWorkerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = WorkerVoiceSelect
  VoiceMove = WorkerVoiceMove
  VoiceAttack = WorkerVoiceMove
  VoiceGuard = WorkerVoiceMove
  VoiceFear = WorkerVoiceFear
  VoiceTaskComplete = WorkerVoiceBuildComplete
  UnitSpecificSounds
    VoiceEnter        = WorkerVoiceMoveUpgraded
    VoiceEnterHostile = WorkerVoiceMoveUpgraded
    VoiceGarrison     = WorkerVoiceGarrison
    VoiceCreate       = WorkerVoiceCreate
    VoiceSupply       = WorkerVoiceSupply
    VoiceNoBuild      = WorkerVoiceBuildNot
    VoiceRepair       = WorkerVoiceRepair
    VoiceDisarm       = WorkerVoiceClearMine
    VoiceBuildResponse = WorkerVoiceBuild
    VoiceGetHealed    = WorkerVoiceMoveUpgraded
    VoiceMoveUpgraded = WorkerVoiceMoveUpgraded
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SALVAGER DOZER HARVESTER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = WorkerAIUpdate ModuleTag_03
    RepairHealthPercentPerSecond  = 2%    ; % of max health to repair each second
    BoredTime                     = 5000  ; in milliseconds
    BoredRange                    = 150   ; when bored, we look this far away to do something 
    MaxBoxes                      = 1
    UpgradedSupplyBoost           = 25 ; gives this much more cash for every box collected
    SupplyCenterActionDelay       = 150 ;400 ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay    = 150 ;400 ;ms per box (many small transactions)
    SupplyWarehouseScanDistance   = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = WorkerVoiceSuppliesDepleted
    ; the only "enemies" that workers can acquire are mines, to be disarmed...
    AutoAcquireEnemiesWhenIdle    = Yes
  End
  Locomotor = SET_NORMAL FastHumanLocomotor
  Locomotor = SET_NORMAL_UPGRADED WorkerShoesLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
  Behavior = LocomotorSetUpgrade ModuleTag_07
    TriggeredBy = Upgrade_GLAWorkerShoes
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_WorkerDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED +SUICIDED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_WorkerDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End

; --- end Death modules ---

  Behavior = StealthDetectorUpdate ModuleTag_12
    DetectionRate         = 500   ; how often to rescan for stealthed things in my sight (msec)
    ;DetectionRange       = ??? ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf   = MINE  ; we can only detect MINES, not other stealthed things
  End

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = CommandSetUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLAWorkerFakeCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerRealCommandSet
    CommandSet = GLAWorkerFakeBuildingsCommandSet
  End
 
  Behavior = CommandSetUpgrade ModuleTag_15
    TriggeredBy = Upgrade_GLAWorkerRealCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
    CommandSet = GLAWorkerCommandSet
  End
 
  Behavior = ProductionUpdate ModuleTag_16
    MaxQueueEntries = 1; For the command set switching upgrade
  End

  Behavior = LifetimeUpdate ModuleTag_Kill
    MinLifetime = 2500   ; min lifetime in msec
    MaxLifetime = 2500   ; max lifetime in msec
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End


;------------------------------------------------------------------------------
;Object PoisonFieldAnthraxBomb
;  ShroudClearingRange = 300
;  KindOf = IMMOBILE CLEANUP_HAZARD STICK_TO_TERRAIN_SLOPE INERT NO_COLLIDE SALVAGER
;End
;Object PoisonFieldAnthraxGammaBomb
;  ShroudClearingRange = 300
;  KindOf = IMMOBILE CLEANUP_HAZARD STICK_TO_TERRAIN_SLOPE INERT NO_COLLIDE SALVAGER
;End
;Object Chem_PoisonFieldGammaLarge
;  ShroudClearingRange = 150
;  KindOf = IMMOBILE CLEANUP_HAZARD STICK_TO_TERRAIN_SLOPE INERT NO_COLLIDE SALVAGER
;End
;Object Chem_PoisonFieldGammaMedium
;  ShroudClearingRange = 75
;  KindOf = IMMOBILE CLEANUP_HAZARD STICK_TO_TERRAIN_SLOPE INERT NO_COLLIDE SALVAGER
;End
;Object PoisonFieldMedium
;  ShroudClearingRange = 75
;  KindOf = IMMOBILE CLEANUP_HAZARD STICK_TO_TERRAIN_SLOPE INERT NO_COLLIDE SALVAGER
;End
;Object PoisonFieldSmall
;  ShroudClearingRange = 50
;  KindOf = IMMOBILE CLEANUP_HAZARD STICK_TO_TERRAIN_SLOPE INERT NO_COLLIDE SALVAGER
;End
;Object PoisonFieldSmall
;  ShroudClearingRange = 50
;  KindOf = IMMOBILE CLEANUP_HAZARD STICK_TO_TERRAIN_SLOPE INERT NO_COLLIDE SALVAGER
;End
